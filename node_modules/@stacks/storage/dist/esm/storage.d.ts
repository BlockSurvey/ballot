/// <reference types="node" />
import { UserSession } from '@stacks/auth';
import { EncryptionOptions } from '@stacks/encryption';
import { FetchFn } from '@stacks/network';
import { GaiaHubConfig } from './hub';
export interface PutFileOptions extends EncryptionOptions {
    contentType?: string;
    encrypt?: boolean | string;
    dangerouslyIgnoreEtag?: boolean;
}
export interface GetFileOptions extends GetFileUrlOptions {
    decrypt?: boolean | string;
    verify?: boolean;
}
export interface GetFileUrlOptions {
    username?: string;
    app?: string;
    zoneFileLookupURL?: string;
}
export interface StorageOptions {
    userSession?: UserSession;
}
export declare class Storage {
    userSession: UserSession;
    constructor(options: StorageOptions);
    getFile(path: string, options?: GetFileOptions): Promise<string | ArrayBuffer | null>;
    getUserAppFileUrl(path: string, username: string, appOrigin: string, zoneFileLookupURL?: string): Promise<string | undefined>;
    getGaiaAddress(app: string, username?: string, zoneFileLookupURL?: string): Promise<string>;
    getFileUrl(path: string, options?: GetFileUrlOptions): Promise<string>;
    getFileContents(path: string, app: string, username: string | undefined, zoneFileLookupURL: string | undefined, forceText: boolean, fetchFn?: FetchFn): Promise<string | ArrayBuffer | null>;
    getFileSignedUnencrypted(path: string, opt: GetFileOptions): Promise<string | ArrayBuffer | null>;
    handleSignedEncryptedContents(path: string, storedContents: string, app: string, privateKey?: string, username?: string, zoneFileLookupURL?: string): Promise<string | Buffer>;
    putFile(path: string, content: string | Buffer | ArrayBufferView | Blob, options?: PutFileOptions): Promise<string>;
    deleteFile(path: string, options?: {
        wasSigned?: boolean;
    }): Promise<void>;
    getAppBucketUrl(gaiaHubUrl: string, appPrivateKey: string): Promise<string>;
    listFilesLoop(hubConfig: GaiaHubConfig | null, page: string | null, callCount: number, fileCount: number, callback: (name: string) => boolean, fetchFn?: FetchFn): Promise<number>;
    listFiles(callback: (name: string) => boolean): Promise<number>;
    getOrSetLocalGaiaHubConnection(): Promise<GaiaHubConfig>;
    setLocalGaiaHubConnection(): Promise<GaiaHubConfig>;
}
declare type FileUrlOptions = {
    path: string;
    username: string;
    appOrigin: string;
    zoneFileLookupURL: string;
};
export declare function getUserAppFileUrl(options: FileUrlOptions): Promise<string | undefined>;
export {};
