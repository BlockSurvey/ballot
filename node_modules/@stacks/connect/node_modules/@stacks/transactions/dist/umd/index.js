/*! For license information please see index.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.StacksTransactions=e():t.StacksTransactions=e()}(this,(()=>(()=>{var t={766:(t,e)=>{"use strict";e.byteLength=function(t){var e=u(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,o=u(t),s=o[0],a=o[1],f=new i(function(t,e,r){return 3*(e+r)/4-r}(0,s,a)),c=0,h=a>0?s-4:s;for(r=0;r<h;r+=4)e=n[t.charCodeAt(r)]<<18|n[t.charCodeAt(r+1)]<<12|n[t.charCodeAt(r+2)]<<6|n[t.charCodeAt(r+3)],f[c++]=e>>16&255,f[c++]=e>>8&255,f[c++]=255&e;return 2===a&&(e=n[t.charCodeAt(r)]<<2|n[t.charCodeAt(r+1)]>>4,f[c++]=255&e),1===a&&(e=n[t.charCodeAt(r)]<<10|n[t.charCodeAt(r+1)]<<4|n[t.charCodeAt(r+2)]>>2,f[c++]=e>>8&255,f[c++]=255&e),f},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],s=16383,a=0,u=n-i;a<u;a+=s)o.push(f(t,a,a+s>u?u:a+s));return 1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),o.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=o.length;s<a;++s)r[s]=o[s],n[o.charCodeAt(s)]=s;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function f(t,e,n){for(var i,o,s=[],a=e;a<n;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},834:(t,e,r)=>{"use strict";const n=r(766),i=r(333),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=function(t){return+t!=t&&(t=0),u.alloc(+t)},e.INSPECT_MAX_BYTES=50;const s=2147483647;function a(t){if(t>s)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,u.prototype),e}function u(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return h(t)}return f(t,e,r)}function f(t,e,r){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!u.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|y(t,e);let n=a(r);const i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(Y(t,Uint8Array)){const e=new Uint8Array(t);return p(e.buffer,e.byteOffset,e.byteLength)}return l(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Y(t,ArrayBuffer)||t&&Y(t.buffer,ArrayBuffer))return p(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(Y(t,SharedArrayBuffer)||t&&Y(t.buffer,SharedArrayBuffer)))return p(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return u.from(n,e,r);const i=function(t){if(u.isBuffer(t)){const e=0|d(t.length),r=a(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!=typeof t.length||J(t.length)?a(0):l(t):"Buffer"===t.type&&Array.isArray(t.data)?l(t.data):void 0}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return u.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function h(t){return c(t),a(t<0?0:0|d(t))}function l(t){const e=t.length<0?0:0|d(t.length),r=a(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function p(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,u.prototype),n}function d(t){if(t>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|t}function y(t,e){if(u.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Y(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return G(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return W(t).length;default:if(i)return n?-1:G(t).length;e=(""+e).toLowerCase(),i=!0}}function g(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,e,r);case"utf8":case"utf-8":return C(this,e,r);case"ascii":return U(this,e,r);case"latin1":case"binary":return _(this,e,r);case"base64":return A(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function w(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function b(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),J(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:m(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):m(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function m(t,e,r,n,i){let o,s=1,a=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}function f(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){let n=-1;for(o=r;o<a;o++)if(f(t,o)===f(e,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===u)return n*s}else-1!==n&&(o-=o-n),n=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){let r=!0;for(let n=0;n<u;n++)if(f(t,o+n)!==f(e,n)){r=!1;break}if(r)return o}return-1}function E(t,e,r,n){r=Number(r)||0;const i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;const o=e.length;let s;for(n>o/2&&(n=o/2),s=0;s<n;++s){const n=parseInt(e.substr(2*s,2),16);if(J(n))return s;t[r+s]=n}return s}function v(t,e,r,n){return q(G(e,t.length-r),t,r,n)}function B(t,e,r,n){return q(function(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function S(t,e,r,n){return q(W(e),t,r,n)}function I(t,e,r,n){return q(function(t,e){let r,n,i;const o=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function A(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function C(t,e,r){r=Math.min(t.length,r);const n=[];let i=e;for(;i<r;){const e=t[i];let o=null,s=e>239?4:e>223?3:e>191?2:1;if(i+s<=r){let r,n,a,u;switch(s){case 1:e<128&&(o=e);break;case 2:r=t[i+1],128==(192&r)&&(u=(31&e)<<6|63&r,u>127&&(o=u));break;case 3:r=t[i+1],n=t[i+2],128==(192&r)&&128==(192&n)&&(u=(15&e)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:r=t[i+1],n=t[i+2],a=t[i+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(u=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&a,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return function(t){const e=t.length;if(e<=T)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=T));return r}(n)}e.kMaxLength=s,u.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(t,e,r){return f(t,e,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(t,e,r){return function(t,e,r){return c(t),t<=0?a(t):void 0!==e?"string"==typeof r?a(t).fill(e,r):a(t).fill(e):a(t)}(t,e,r)},u.allocUnsafe=function(t){return h(t)},u.allocUnsafeSlow=function(t){return h(t)},u.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==u.prototype},u.compare=function(t,e){if(Y(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),Y(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=u.allocUnsafe(e);let i=0;for(r=0;r<t.length;++r){let e=t[r];if(Y(e,Uint8Array))i+e.length>n.length?(u.isBuffer(e)||(e=u.from(e)),e.copy(n,i)):Uint8Array.prototype.set.call(n,e,i);else{if(!u.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,i)}i+=e.length}return n},u.byteLength=y,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)w(this,e,e+1);return this},u.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)w(this,e,e+3),w(this,e+1,e+2);return this},u.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)w(this,e,e+7),w(this,e+1,e+6),w(this,e+2,e+5),w(this,e+3,e+4);return this},u.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?C(this,0,t):g.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){let t="";const r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(t,e,r,n,i){if(Y(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;let o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0);const a=Math.min(o,s),f=this.slice(n,i),c=t.slice(e,r);for(let t=0;t<a;++t)if(f[t]!==c[t]){o=f[t],s=c[t];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},u.prototype.indexOf=function(t,e,r){return b(this,t,e,r,!0)},u.prototype.lastIndexOf=function(t,e,r){return b(this,t,e,r,!1)},u.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return E(this,t,e,r);case"utf8":case"utf-8":return v(this,t,e,r);case"ascii":case"latin1":case"binary":return B(this,t,e,r);case"base64":return S(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const T=4096;function U(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function _(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function x(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=e;n<r;++n)i+=X[t[n]];return i}function O(t,e,r){const n=t.slice(e,r);let i="";for(let t=0;t<n.length-1;t+=2)i+=String.fromCharCode(n[t]+256*n[t+1]);return i}function P(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function k(t,e,r,n,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function N(t,e,r,n,i){j(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,r}function L(t,e,r,n,i){j(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r+7]=o,o>>=8,t[r+6]=o,o>>=8,t[r+5]=o,o>>=8,t[r+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s>>=8,t[r+2]=s,s>>=8,t[r+1]=s,s>>=8,t[r]=s,r+8}function R(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function F(t,e,r,n,o){return e=+e,r>>>=0,o||R(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function M(t,e,r,n,o){return e=+e,r>>>=0,o||R(t,0,r,8),i.write(t,e,r,n,52,8),r+8}u.prototype.slice=function(t,e){const r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);let n=this[t],i=1,o=0;for(;++o<e&&(i*=256);)n+=this[t+o]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);let n=this[t+--e],i=1;for(;e>0&&(i*=256);)n+=this[t+--e]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(t,e){return t>>>=0,e||P(t,1,this.length),this[t]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(t,e){return t>>>=0,e||P(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(t,e){return t>>>=0,e||P(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(t,e){return t>>>=0,e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(t,e){return t>>>=0,e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readBigUInt64LE=Z((function(t){D(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||z(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),u.prototype.readBigUInt64BE=Z((function(t){D(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||z(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),u.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);let n=this[t],i=1,o=0;for(;++o<e&&(i*=256);)n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);let n=e,i=1,o=this[t+--n];for(;n>0&&(i*=256);)o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return t>>>=0,e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){t>>>=0,e||P(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(t,e){t>>>=0,e||P(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(t,e){return t>>>=0,e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return t>>>=0,e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readBigInt64LE=Z((function(t){D(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||z(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),u.prototype.readBigInt64BE=Z((function(t){D(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||z(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+r)})),u.prototype.readFloatLE=function(t,e){return t>>>=0,e||P(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return t>>>=0,e||P(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return t>>>=0,e||P(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return t>>>=0,e||P(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||k(this,t,e,r,Math.pow(2,8*r)-1,0);let i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||k(this,t,e,r,Math.pow(2,8*r)-1,0);let i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||k(this,t,e,1,255,0),this[e]=255&t,e+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||k(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||k(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||k(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||k(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigUInt64LE=Z((function(t,e=0){return N(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=Z((function(t,e=0){return L(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);k(this,t,e,r,n-1,-n)}let i=0,o=1,s=0;for(this[e]=255&t;++i<r&&(o*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},u.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);k(this,t,e,r,n-1,-n)}let i=r-1,o=1,s=0;for(this[e+i]=255&t;--i>=0&&(o*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},u.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||k(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||k(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||k(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||k(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},u.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||k(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigInt64LE=Z((function(t,e=0){return N(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=Z((function(t,e=0){return L(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(t,e,r){return F(this,t,e,!0,r)},u.prototype.writeFloatBE=function(t,e,r){return F(this,t,e,!1,r)},u.prototype.writeDoubleLE=function(t,e,r){return M(this,t,e,!0,r)},u.prototype.writeDoubleBE=function(t,e,r){return M(this,t,e,!1,r)},u.prototype.copy=function(t,e,r,n){if(!u.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const i=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},u.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{const o=u.isBuffer(t)?t:u.from(t,n),s=o.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=o[i%s]}return this};const $={};function V(t,e,r){$[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function H(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function j(t,e,r,n,i,o){if(t>r||t<e){const n="bigint"==typeof e?"n":"";let i;throw i=o>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${e}${n} and <= ${r}${n}`,new $.ERR_OUT_OF_RANGE("value",i,t)}!function(t,e,r){D(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||z(e,t.length-(r+1))}(n,i,o)}function D(t,e){if("number"!=typeof t)throw new $.ERR_INVALID_ARG_TYPE(e,"number",t)}function z(t,e,r){if(Math.floor(t)!==t)throw D(t,r),new $.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new $.ERR_BUFFER_OUT_OF_BOUNDS;throw new $.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}V("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),V("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),V("ERR_OUT_OF_RANGE",(function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=H(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=H(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n}),RangeError);const K=/[^+/0-9A-Za-z-_]/g;function G(t,e){let r;e=e||1/0;const n=t.length;let i=null;const o=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function W(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(K,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function q(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function Y(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function J(t){return t!=t}const X=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function Z(t){return"undefined"==typeof BigInt?Q:t}function Q(){throw new Error("BigInt not supported")}},98:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.c32ToB58=e.b58ToC32=e.c32addressDecode=e.c32address=e.versions=void 0;var n=r(392),i=r(716);e.versions={mainnet:{p2pkh:22,p2sh:20},testnet:{p2pkh:26,p2sh:21}};var o={};o[0]=e.versions.mainnet.p2pkh,o[5]=e.versions.mainnet.p2sh,o[111]=e.versions.testnet.p2pkh,o[196]=e.versions.testnet.p2sh;var s={};function a(t,e){if(!e.match(/^[0-9a-fA-F]{40}$/))throw new Error("Invalid argument: not a hash160 hex string");return"S"+n.c32checkEncode(t,e)}function u(t){if(t.length<=5)throw new Error("Invalid c32 address: invalid length");if("S"!=t[0])throw new Error('Invalid c32 address: must start with "S"');return n.c32checkDecode(t.slice(1))}s[e.versions.mainnet.p2pkh]=0,s[e.versions.mainnet.p2sh]=5,s[e.versions.testnet.p2pkh]=111,s[e.versions.testnet.p2sh]=196,e.c32address=a,e.c32addressDecode=u,e.b58ToC32=function(t,e){void 0===e&&(e=-1);var r,n=i.decode(t),s=n.data.toString("hex"),u=parseInt(n.prefix.toString("hex"),16);return e<0?(r=u,void 0!==o[u]&&(r=o[u])):r=e,a(r,s)},e.c32ToB58=function(t,e){void 0===e&&(e=-1);var r,n=u(t),o=n[0],a=n[1];e<0?(r=o,void 0!==s[o]&&(r=s[o])):r=e;var f=r.toString(16);return 1===f.length&&(f="0"+f),i.encode(a,f)}},716:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decode=e.encode=void 0;var n=r(131),i=r(926),o=r(805),s="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";e.encode=function(t,e,r){if(void 0===e&&(e="00"),void 0===r&&(r="hex"),"string"==typeof t&&(t=new n.Buffer(t,r)),!(t instanceof n.Buffer))throw new TypeError('"data" argument must be an Array of Buffers');e instanceof n.Buffer||(e=new n.Buffer(e,r));var a=n.Buffer.concat([e,t]);return a=i.hashSha256(a),a=i.hashSha256(a),a=n.Buffer.concat([e,t,a.slice(0,4)]),o(s).encode(a)},e.decode=function(t,e){var r=new n.Buffer(o(s).decode(t)),a=r.slice(0,1),u=r.slice(1,-4),f=n.Buffer.concat([a,u]);return f=i.hashSha256(f),f=i.hashSha256(f),r.slice(-4).forEach((function(t,e){if(t!==f[e])throw new Error("Invalid checksum")})),e&&(a=a.toString(e),u=u.toString(e)),{prefix:a,data:u}}},392:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.c32checkDecode=e.c32checkEncode=void 0;var n=r(131),i=r(103),o=r(926);function s(t){return o.hashSha256(o.hashSha256(n.Buffer.from(t,"hex"))).slice(0,4).toString("hex")}e.c32checkEncode=function(t,e){if(t<0||t>=32)throw new Error("Invalid version (must be between 0 and 31)");if(!e.match(/^[0-9a-fA-F]*$/))throw new Error("Invalid data (not a hex string)");(e=e.toLowerCase()).length%2!=0&&(e="0"+e);var r=t.toString(16);1===r.length&&(r="0"+r);var n=s(""+r+e),o=i.c32encode(""+e+n);return""+i.c32[t]+o},e.c32checkDecode=function(t){t=i.c32normalize(t);var e=i.c32decode(t.slice(1)),r=t[0],n=i.c32.indexOf(r),o=e.slice(-8),a=n.toString(16);if(1===a.length&&(a="0"+a),s(""+a+e.substring(0,e.length-8))!==o)throw new Error("Invalid c32check string: checksum mismatch");return[n,e.substring(0,e.length-8)]}},103:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.c32decode=e.c32normalize=e.c32encode=e.c32=void 0;var n=r(131);e.c32="0123456789ABCDEFGHJKMNPQRSTVWXYZ";var i="0123456789abcdef";function o(t){return t.toUpperCase().replace(/O/g,"0").replace(/L|I/g,"1")}e.c32encode=function(t,r){if(!t.match(/^[0-9a-fA-F]*$/))throw new Error("Not a hex-encoded string");t.length%2!=0&&(t="0"+t);for(var o=[],s=0,a=(t=t.toLowerCase()).length-1;a>=0;a--)if(s<4){var u=i.indexOf(t[a])>>s,f=0;0!==a&&(f=i.indexOf(t[a-1]));var c=1+s,h=f%(1<<c)<<5-c,l=e.c32[u+h];s=c,o.unshift(l)}else s=0;var p=0;for(a=0;a<o.length&&"0"===o[a];a++)p++;o=o.slice(p);var d=n.Buffer.from(t,"hex").toString().match(/^\u0000*/),y=d?d[0].length:0;for(a=0;a<y;a++)o.unshift(e.c32[0]);if(r){var g=r-o.length;for(a=0;a<g;a++)o.unshift(e.c32[0])}return o.join("")},e.c32normalize=o,e.c32decode=function(t,r){if(!(t=o(t)).match("^["+e.c32+"]*$"))throw new Error("Not a c32-encoded string");for(var n=t.match("^"+e.c32[0]+"*"),s=n?n[0].length:0,a=[],u=0,f=0,c=t.length-1;c>=0;c--){4===f&&(a.unshift(i[u]),f=0,u=0);var h=(e.c32.indexOf(t[c])<<f)+u,l=i[h%16];if((u=h>>4)>1<<(f+=1))throw new Error("Panic error in decoding.");a.unshift(l)}a.unshift(i[u]),a.length%2==1&&a.unshift("0");var p=0;for(c=0;c<a.length&&"0"===a[c];c++)p++;var d=(a=a.slice(p-p%2)).join("");for(c=0;c<s;c++)d="00"+d;if(r){var y=2*r-d.length;for(c=0;c<y;c+=2)d="00"+d}return d}},870:(t,e,r)=>{"use strict";e.yI=e.H4=void 0;r(103),r(392);var n=r(98);Object.defineProperty(e,"H4",{enumerable:!0,get:function(){return n.c32address}}),Object.defineProperty(e,"yI",{enumerable:!0,get:function(){return n.c32addressDecode}})},805:(t,e,r)=>{"use strict";var n=r(821).Buffer;t.exports=function(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),s=o.charCodeAt(0);if(255!==e[s])throw new TypeError(o+" is ambiguous");e[s]=i}var a=t.length,u=t.charAt(0),f=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function h(t){if("string"!=typeof t)throw new TypeError("Expected String");if(0===t.length)return n.alloc(0);for(var r=0,i=0,o=0;t[r]===u;)i++,r++;for(var s=(t.length-r)*f+1>>>0,c=new Uint8Array(s);t[r];){var h=e[t.charCodeAt(r)];if(255===h)return;for(var l=0,p=s-1;(0!==h||l<o)&&-1!==p;p--,l++)h+=a*c[p]>>>0,c[p]=h%256>>>0,h=h/256>>>0;if(0!==h)throw new Error("Non-zero carry");o=l,r++}for(var d=s-o;d!==s&&0===c[d];)d++;var y=n.allocUnsafe(i+(s-d));y.fill(0,0,i);for(var g=i;d!==s;)y[g++]=c[d++];return y}return{encode:function(e){if((Array.isArray(e)||e instanceof Uint8Array)&&(e=n.from(e)),!n.isBuffer(e))throw new TypeError("Expected Buffer");if(0===e.length)return"";for(var r=0,i=0,o=0,s=e.length;o!==s&&0===e[o];)o++,r++;for(var f=(s-o)*c+1>>>0,h=new Uint8Array(f);o!==s;){for(var l=e[o],p=0,d=f-1;(0!==l||p<i)&&-1!==d;d--,p++)l+=256*h[d]>>>0,h[d]=l%a>>>0,l=l/a>>>0;if(0!==l)throw new Error("Non-zero carry");i=p,o++}for(var y=f-i;y!==f&&0===h[y];)y++;for(var g=u.repeat(r);y<f;++y)g+=t.charAt(h[y]);return g},decodeUnsafe:h,decode:function(t){var e=h(t);if(e)return e;throw new Error("Non-base"+a+" character")}}}},131:(t,e,r)=>{"use strict";var n=r(766),i=r(333),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=function(t){return+t!=t&&(t=0),u.alloc(+t)},e.INSPECT_MAX_BYTES=50;var s=2147483647;function a(t){if(t>s)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,u.prototype),e}function u(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return h(t)}return f(t,e,r)}function f(t,e,r){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!u.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=0|y(t,e),n=a(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(H(t,Uint8Array)){var e=new Uint8Array(t);return p(e.buffer,e.byteOffset,e.byteLength)}return l(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(H(t,ArrayBuffer)||t&&H(t.buffer,ArrayBuffer))return p(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(H(t,SharedArrayBuffer)||t&&H(t.buffer,SharedArrayBuffer)))return p(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return u.from(n,e,r);var i=function(t){if(u.isBuffer(t)){var e=0|d(t.length),r=a(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!=typeof t.length||j(t.length)?a(0):l(t):"Buffer"===t.type&&Array.isArray(t.data)?l(t.data):void 0}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return u.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function h(t){return c(t),a(t<0?0:0|d(t))}function l(t){for(var e=t.length<0?0:0|d(t.length),r=a(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function p(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,u.prototype),n}function d(t){if(t>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|t}function y(t,e){if(u.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||H(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return M(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return $(t).length;default:if(i)return n?-1:M(t).length;e=(""+e).toLowerCase(),i=!0}}function g(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,e,r);case"utf8":case"utf-8":return C(this,e,r);case"ascii":return U(this,e,r);case"latin1":case"binary":return _(this,e,r);case"base64":return A(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function w(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function b(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),j(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:m(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):m(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function m(t,e,r,n,i){var o,s=1,a=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}function f(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var c=-1;for(o=r;o<a;o++)if(f(t,o)===f(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*s}else-1!==c&&(o-=o-c),c=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){for(var h=!0,l=0;l<u;l++)if(f(t,o+l)!==f(e,l)){h=!1;break}if(h)return o}return-1}function E(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(j(a))return s;t[r+s]=a}return s}function v(t,e,r,n){return V(M(e,t.length-r),t,r,n)}function B(t,e,r,n){return V(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function S(t,e,r,n){return V($(e),t,r,n)}function I(t,e,r,n){return V(function(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=(r=t.charCodeAt(s))>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function A(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function C(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,s,a,u,f=t[i],c=null,h=f>239?4:f>223?3:f>191?2:1;if(i+h<=r)switch(h){case 1:f<128&&(c=f);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&f)<<6|63&o)>127&&(c=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(u=(15&f)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&f)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(c=u)}null===c?(c=65533,h=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=h}return function(t){var e=t.length;if(e<=T)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=T));return r}(n)}e.kMaxLength=s,u.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(t,e,r){return f(t,e,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(t,e,r){return function(t,e,r){return c(t),t<=0?a(t):void 0!==e?"string"==typeof r?a(t).fill(e,r):a(t).fill(e):a(t)}(t,e,r)},u.allocUnsafe=function(t){return h(t)},u.allocUnsafeSlow=function(t){return h(t)},u.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==u.prototype},u.compare=function(t,e){if(H(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),H(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=u.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var o=t[r];if(H(o,Uint8Array))i+o.length>n.length?u.from(o).copy(n,i):Uint8Array.prototype.set.call(n,o,i);else{if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i)}i+=o.length}return n},u.byteLength=y,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)w(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)w(this,e,e+3),w(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)w(this,e,e+7),w(this,e+1,e+6),w(this,e+2,e+5),w(this,e+3,e+4);return this},u.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?C(this,0,t):g.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(t,e,r,n,i){if(H(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0),a=Math.min(o,s),f=this.slice(n,i),c=t.slice(e,r),h=0;h<a;++h)if(f[h]!==c[h]){o=f[h],s=c[h];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},u.prototype.indexOf=function(t,e,r){return b(this,t,e,r,!0)},u.prototype.lastIndexOf=function(t,e,r){return b(this,t,e,r,!1)},u.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return E(this,t,e,r);case"utf8":case"utf-8":return v(this,t,e,r);case"ascii":case"latin1":case"binary":return B(this,t,e,r);case"base64":return S(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function U(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function _(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function x(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=D[t[o]];return i}function O(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function P(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function k(t,e,r,n,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function N(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function L(t,e,r,n,o){return e=+e,r>>>=0,o||N(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function R(t,e,r,n,o){return e=+e,r>>>=0,o||N(t,0,r,8),i.write(t,e,r,n,52,8),r+8}u.prototype.slice=function(t,e){var r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n=this.subarray(t,e);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(t,e){return t>>>=0,e||P(t,1,this.length),this[t]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(t,e){return t>>>=0,e||P(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(t,e){return t>>>=0,e||P(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(t,e){return t>>>=0,e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(t,e){return t>>>=0,e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return t>>>=0,e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){t>>>=0,e||P(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(t,e){t>>>=0,e||P(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(t,e){return t>>>=0,e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return t>>>=0,e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return t>>>=0,e||P(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return t>>>=0,e||P(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return t>>>=0,e||P(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return t>>>=0,e||P(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||k(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||k(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||k(this,t,e,1,255,0),this[e]=255&t,e+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||k(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||k(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||k(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||k(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);k(this,t,e,r,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},u.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);k(this,t,e,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},u.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||k(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||k(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||k(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||k(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},u.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||k(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeFloatLE=function(t,e,r){return L(this,t,e,!0,r)},u.prototype.writeFloatBE=function(t,e,r){return L(this,t,e,!1,r)},u.prototype.writeDoubleLE=function(t,e,r){return R(this,t,e,!0,r)},u.prototype.writeDoubleBE=function(t,e,r){return R(this,t,e,!1,r)},u.prototype.copy=function(t,e,r,n){if(!u.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},u.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var i=t.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(t=i)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var s=u.isBuffer(t)?t:u.from(t,n),a=s.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<r-e;++o)this[o+e]=s[o%a]}return this};var F=/[^+/0-9A-Za-z-_]/g;function M(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],s=0;s<n;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function $(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(F,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function V(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function H(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function j(t){return t!=t}var D=function(){for(var t="0123456789abcdef",e=new Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)e[n+i]=t[r]+t[i];return e}()},616:function(){!function(t){!function(e){var r="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,i="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),o="FormData"in t,s="ArrayBuffer"in t;if(s)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(t){return t&&a.indexOf(Object.prototype.toString.call(t))>-1};function f(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function c(t){return"string"!=typeof t&&(t=String(t)),t}function h(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n&&(e[Symbol.iterator]=function(){return e}),e}function l(t){this.map={},t instanceof l?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function p(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function d(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function y(t){var e=new FileReader,r=d(e);return e.readAsArrayBuffer(t),r}function g(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function w(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:i&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:o&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:r&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():s&&i&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=g(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(t)||u(t))?this._bodyArrayBuffer=g(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var t=p(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(y)}),this.text=function(){var t,e,r,n=p(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,r=d(e=new FileReader),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(E)}),this.json=function(){return this.text().then(JSON.parse)},this}l.prototype.append=function(t,e){t=f(t),e=c(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},l.prototype.delete=function(t){delete this.map[f(t)]},l.prototype.get=function(t){return t=f(t),this.has(t)?this.map[t]:null},l.prototype.has=function(t){return this.map.hasOwnProperty(f(t))},l.prototype.set=function(t,e){this.map[f(t)]=c(e)},l.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},l.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),h(t)},l.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),h(t)},l.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),h(t)},n&&(l.prototype[Symbol.iterator]=l.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function m(t,e){var r,n,i=(e=e||{}).body;if(t instanceof m){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new l(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new l(e.headers)),this.method=(n=(r=e.method||this.method||"GET").toUpperCase(),b.indexOf(n)>-1?n:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function E(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(i))}})),e}function v(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new l(e.headers),this.url=e.url||"",this._initBody(t)}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},w.call(m.prototype),w.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},v.error=function(){var t=new v(null,{status:0,statusText:""});return t.type="error",t};var B=[301,302,303,307,308];v.redirect=function(t,e){if(-1===B.indexOf(e))throw new RangeError("Invalid status code");return new v(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function S(t,r){return new Promise((function(n,o){var s=new m(t,r);if(s.signal&&s.signal.aborted)return o(new e.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function u(){a.abort()}a.onload=function(){var t,e,r={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new l,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var r=t.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();e.append(n,i)}})),e)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;n(new v(i,r))},a.onerror=function(){o(new TypeError("Network request failed"))},a.ontimeout=function(){o(new TypeError("Network request failed"))},a.onabort=function(){o(new e.DOMException("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&i&&(a.responseType="blob"),s.headers.forEach((function(t,e){a.setRequestHeader(e,t)})),s.signal&&(s.signal.addEventListener("abort",u),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",u)}),a.send(void 0===s._bodyInit?null:s._bodyInit)}))}S.polyfill=!0,t.fetch||(t.fetch=S,t.Headers=l,t.Request=m,t.Response=v),e.Headers=l,e.Request=m,e.Response=v,e.fetch=S,Object.defineProperty(e,"__esModule",{value:!0})}({})}("undefined"!=typeof self?self:this)},926:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hashSha256=e.sha256=e.sha256nodeCrypto=e.sha256js=void 0;var n=r(878),i=function(){function t(){this._blockSize=64,this._finalSize=56,this._len=0,this._w=new Array(64),this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this._block=n.Buffer.alloc(this._blockSize)}return t.prototype.update=function(t,e){"string"==typeof t&&(e=e||"utf8",t=n.Buffer.from(t,e));for(var r=this._block,i=this._blockSize,o=t.length,s=this._len,a=0;a<o;){for(var u=s%i,f=Math.min(o-a,i-u),c=0;c<f;c++)r[u+c]=t[a+c];a+=f,(s+=f)%i==0&&this._update(r)}return this._len+=o,this},t.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var i=(4294967295&r)>>>0,o=(r-i)/4294967296;this._block.writeUInt32BE(o,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var s=n.Buffer.alloc(32);return s.writeInt32BE(this._a,0),s.writeInt32BE(this._b,4),s.writeInt32BE(this._c,8),s.writeInt32BE(this._d,12),s.writeInt32BE(this._e,16),s.writeInt32BE(this._f,20),s.writeInt32BE(this._g,24),s.writeInt32BE(this._h,28),t?s.toString(t):s},t.prototype.ch=function(t,e,r){return r^t&(e^r)},t.prototype.maj=function(t,e,r){return t&e|r&(t|e)},t.prototype.sigma0=function(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)},t.prototype.sigma1=function(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)},t.prototype.gamma0=function(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3},t.prototype.gamma1=function(t){return(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10},t.prototype._update=function(e){for(var r=this._w,n=0|this._a,i=0|this._b,o=0|this._c,s=0|this._d,a=0|this._e,u=0|this._f,f=0|this._g,c=0|this._h,h=0;h<16;++h)r[h]=e.readInt32BE(4*h);for(;h<64;++h)r[h]=this.gamma1(r[h-2])+r[h-7]+this.gamma0(r[h-15])+r[h-16]|0;for(var l=0;l<64;++l){var p=c+this.sigma1(a)+this.ch(a,u,f)+t.K[l]+r[l]|0,d=this.sigma0(n)+this.maj(n,i,o)|0;c=f,f=u,u=a,a=s+p|0,s=o,o=i,i=n,n=p+d|0}this._a=n+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0,this._f=u+this._f|0,this._g=f+this._g|0,this._h=c+this._h|0},t.K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],t}();e.sha256js=i;var o=function(){function t(){t.useCryptoModuleCache&&void 0!==t.nodeCryptoCreateHash||(t.nodeCryptoCreateHash=r(96).createHash),this.hash=t.nodeCryptoCreateHash("sha256")}return t.prototype.update=function(t,e){return this.hash.update(t,e),this},t.prototype.digest=function(t){return t?this.hash.digest(t):this.hash.digest()},t.useCryptoModuleCache=!0,t}();e.sha256nodeCrypto=o;var s=void 0,a=function(){function t(){!function(){if(o.useCryptoModuleCache&&void 0!==s)return s;var t=!1;try{var e=r(96);t=e&&"function"==typeof e.createHash}catch(t){}return s=t,t}()?this.instance=new i:this.instance=new o}return t.prototype.update=function(t,e){return this.instance.update(t,e),this},t.prototype.digest=function(t){return t?this.instance.digest(t):this.instance.digest()},t}();function u(t){return(new a).update(t).digest()}e.sha256=a,e.hashSha256=u,e.default=u},878:(t,e,r)=>{"use strict";var n=r(766),i=r(333),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=function(t){return+t!=t&&(t=0),u.alloc(+t)},e.INSPECT_MAX_BYTES=50;var s=2147483647;function a(t){if(t>s)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,u.prototype),e}function u(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return h(t)}return f(t,e,r)}function f(t,e,r){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!u.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=0|y(t,e),n=a(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(H(t,Uint8Array)){var e=new Uint8Array(t);return p(e.buffer,e.byteOffset,e.byteLength)}return l(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(H(t,ArrayBuffer)||t&&H(t.buffer,ArrayBuffer))return p(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(H(t,SharedArrayBuffer)||t&&H(t.buffer,SharedArrayBuffer)))return p(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return u.from(n,e,r);var i=function(t){if(u.isBuffer(t)){var e=0|d(t.length),r=a(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!=typeof t.length||j(t.length)?a(0):l(t):"Buffer"===t.type&&Array.isArray(t.data)?l(t.data):void 0}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return u.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function h(t){return c(t),a(t<0?0:0|d(t))}function l(t){for(var e=t.length<0?0:0|d(t.length),r=a(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function p(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,u.prototype),n}function d(t){if(t>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|t}function y(t,e){if(u.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||H(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return M(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return $(t).length;default:if(i)return n?-1:M(t).length;e=(""+e).toLowerCase(),i=!0}}function g(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,e,r);case"utf8":case"utf-8":return C(this,e,r);case"ascii":return U(this,e,r);case"latin1":case"binary":return _(this,e,r);case"base64":return A(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function w(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function b(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),j(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:m(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):m(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function m(t,e,r,n,i){var o,s=1,a=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}function f(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var c=-1;for(o=r;o<a;o++)if(f(t,o)===f(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*s}else-1!==c&&(o-=o-c),c=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){for(var h=!0,l=0;l<u;l++)if(f(t,o+l)!==f(e,l)){h=!1;break}if(h)return o}return-1}function E(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(j(a))return s;t[r+s]=a}return s}function v(t,e,r,n){return V(M(e,t.length-r),t,r,n)}function B(t,e,r,n){return V(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function S(t,e,r,n){return V($(e),t,r,n)}function I(t,e,r,n){return V(function(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=(r=t.charCodeAt(s))>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function A(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function C(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,s,a,u,f=t[i],c=null,h=f>239?4:f>223?3:f>191?2:1;if(i+h<=r)switch(h){case 1:f<128&&(c=f);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&f)<<6|63&o)>127&&(c=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(u=(15&f)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&f)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(c=u)}null===c?(c=65533,h=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=h}return function(t){var e=t.length;if(e<=T)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=T));return r}(n)}e.kMaxLength=s,u.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(t,e,r){return f(t,e,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(t,e,r){return function(t,e,r){return c(t),t<=0?a(t):void 0!==e?"string"==typeof r?a(t).fill(e,r):a(t).fill(e):a(t)}(t,e,r)},u.allocUnsafe=function(t){return h(t)},u.allocUnsafeSlow=function(t){return h(t)},u.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==u.prototype},u.compare=function(t,e){if(H(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),H(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=u.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var o=t[r];if(H(o,Uint8Array))i+o.length>n.length?u.from(o).copy(n,i):Uint8Array.prototype.set.call(n,o,i);else{if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i)}i+=o.length}return n},u.byteLength=y,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)w(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)w(this,e,e+3),w(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)w(this,e,e+7),w(this,e+1,e+6),w(this,e+2,e+5),w(this,e+3,e+4);return this},u.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?C(this,0,t):g.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(t,e,r,n,i){if(H(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0),a=Math.min(o,s),f=this.slice(n,i),c=t.slice(e,r),h=0;h<a;++h)if(f[h]!==c[h]){o=f[h],s=c[h];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},u.prototype.indexOf=function(t,e,r){return b(this,t,e,r,!0)},u.prototype.lastIndexOf=function(t,e,r){return b(this,t,e,r,!1)},u.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return E(this,t,e,r);case"utf8":case"utf-8":return v(this,t,e,r);case"ascii":case"latin1":case"binary":return B(this,t,e,r);case"base64":return S(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function U(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function _(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function x(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=D[t[o]];return i}function O(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function P(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function k(t,e,r,n,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function N(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function L(t,e,r,n,o){return e=+e,r>>>=0,o||N(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function R(t,e,r,n,o){return e=+e,r>>>=0,o||N(t,0,r,8),i.write(t,e,r,n,52,8),r+8}u.prototype.slice=function(t,e){var r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n=this.subarray(t,e);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(t,e){return t>>>=0,e||P(t,1,this.length),this[t]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(t,e){return t>>>=0,e||P(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(t,e){return t>>>=0,e||P(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(t,e){return t>>>=0,e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(t,e){return t>>>=0,e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return t>>>=0,e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){t>>>=0,e||P(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(t,e){t>>>=0,e||P(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(t,e){return t>>>=0,e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return t>>>=0,e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return t>>>=0,e||P(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return t>>>=0,e||P(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return t>>>=0,e||P(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return t>>>=0,e||P(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||k(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||k(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||k(this,t,e,1,255,0),this[e]=255&t,e+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||k(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||k(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||k(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||k(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);k(this,t,e,r,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},u.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);k(this,t,e,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},u.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||k(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||k(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||k(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||k(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},u.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||k(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeFloatLE=function(t,e,r){return L(this,t,e,!0,r)},u.prototype.writeFloatBE=function(t,e,r){return L(this,t,e,!1,r)},u.prototype.writeDoubleLE=function(t,e,r){return R(this,t,e,!0,r)},u.prototype.writeDoubleBE=function(t,e,r){return R(this,t,e,!1,r)},u.prototype.copy=function(t,e,r,n){if(!u.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},u.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var i=t.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(t=i)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var s=u.isBuffer(t)?t:u.from(t,n),a=s.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<r-e;++o)this[o+e]=s[o%a]}return this};var F=/[^+/0-9A-Za-z-_]/g;function M(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],s=0;s<n;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function $(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(F,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function V(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function H(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function j(t){return t!=t}var D=function(){for(var t="0123456789abcdef",e=new Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)e[n+i]=t[r]+t[i];return e}()},333:(t,e)=>{e.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,f=u>>1,c=-7,h=r?i-1:0,l=r?-1:1,p=t[e+h];for(h+=l,o=p&(1<<-c)-1,p>>=-c,c+=a;c>0;o=256*o+t[e+h],h+=l,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+t[e+h],h+=l,c-=8);if(0===o)o=1-f;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=f}return(p?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var s,a,u,f=8*o-i-1,c=(1<<f)-1,h=c>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+h>=1?l/u:l*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(e*u-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[r+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,f+=i;f>0;t[r+p]=255&s,p+=d,s/=256,f-=8);t[r+p-d]|=128*y}},907:(t,e,r)=>{t=r.nmd(t);var n="__lodash_hash_undefined__",i=9007199254740991,o="[object Arguments]",s="[object Boolean]",a="[object Date]",u="[object Function]",f="[object GeneratorFunction]",c="[object Map]",h="[object Number]",l="[object Object]",p="[object Promise]",d="[object RegExp]",y="[object Set]",g="[object String]",w="[object Symbol]",b="[object WeakMap]",m="[object ArrayBuffer]",E="[object DataView]",v="[object Float32Array]",B="[object Float64Array]",S="[object Int8Array]",I="[object Int16Array]",A="[object Int32Array]",C="[object Uint8Array]",T="[object Uint8ClampedArray]",U="[object Uint16Array]",_="[object Uint32Array]",x=/\w*$/,O=/^\[object .+?Constructor\]$/,P=/^(?:0|[1-9]\d*)$/,k={};k[o]=k["[object Array]"]=k[m]=k[E]=k[s]=k[a]=k[v]=k[B]=k[S]=k[I]=k[A]=k[c]=k[h]=k[l]=k[d]=k[y]=k[g]=k[w]=k[C]=k[T]=k[U]=k[_]=!0,k["[object Error]"]=k[u]=k[b]=!1;var N="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,L="object"==typeof self&&self&&self.Object===Object&&self,R=N||L||Function("return this")(),F=e&&!e.nodeType&&e,M=F&&t&&!t.nodeType&&t,$=M&&M.exports===F;function V(t,e){return t.set(e[0],e[1]),t}function H(t,e){return t.add(e),t}function j(t,e,r,n){var i=-1,o=t?t.length:0;for(n&&o&&(r=t[++i]);++i<o;)r=e(r,t[i],i,t);return r}function D(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function z(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}function K(t,e){return function(r){return t(e(r))}}function G(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}var W,q=Array.prototype,Y=Function.prototype,J=Object.prototype,X=R["__core-js_shared__"],Z=(W=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||""))?"Symbol(src)_1."+W:"",Q=Y.toString,tt=J.hasOwnProperty,et=J.toString,rt=RegExp("^"+Q.call(tt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nt=$?R.Buffer:void 0,it=R.Symbol,ot=R.Uint8Array,st=K(Object.getPrototypeOf,Object),at=Object.create,ut=J.propertyIsEnumerable,ft=q.splice,ct=Object.getOwnPropertySymbols,ht=nt?nt.isBuffer:void 0,lt=K(Object.keys,Object),pt=Rt(R,"DataView"),dt=Rt(R,"Map"),yt=Rt(R,"Promise"),gt=Rt(R,"Set"),wt=Rt(R,"WeakMap"),bt=Rt(Object,"create"),mt=Ht(pt),Et=Ht(dt),vt=Ht(yt),Bt=Ht(gt),St=Ht(wt),It=it?it.prototype:void 0,At=It?It.valueOf:void 0;function Ct(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Tt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Ut(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function _t(t){this.__data__=new Tt(t)}function xt(t,e,r){var n=t[e];tt.call(t,e)&&jt(n,r)&&(void 0!==r||e in t)||(t[e]=r)}function Ot(t,e){for(var r=t.length;r--;)if(jt(t[r][0],e))return r;return-1}function Pt(t,e,r,n,i,p,b){var O;if(n&&(O=p?n(t,i,p,b):n(t)),void 0!==O)return O;if(!Wt(t))return t;var P=Dt(t);if(P){if(O=function(t){var e=t.length,r=t.constructor(e);return e&&"string"==typeof t[0]&&tt.call(t,"index")&&(r.index=t.index,r.input=t.input),r}(t),!e)return function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}(t,O)}else{var N=Mt(t),L=N==u||N==f;if(Kt(t))return function(t,e){if(e)return t.slice();var r=new t.constructor(t.length);return t.copy(r),r}(t,e);if(N==l||N==o||L&&!p){if(D(t))return p?t:{};if(O=function(t){return"function"!=typeof t.constructor||Vt(t)?{}:Wt(e=st(t))?at(e):{};var e}(L?{}:t),!e)return function(t,e){return Nt(t,Ft(t),e)}(t,function(t,e){return t&&Nt(e,qt(e),t)}(O,t))}else{if(!k[N])return p?t:{};O=function(t,e,r,n){var i,o=t.constructor;switch(e){case m:return kt(t);case s:case a:return new o(+t);case E:return function(t,e){var r=e?kt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,n);case v:case B:case S:case I:case A:case C:case T:case U:case _:return function(t,e){var r=e?kt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,n);case c:return function(t,e,r){return j(e?r(z(t),!0):z(t),V,new t.constructor)}(t,n,r);case h:case g:return new o(t);case d:return function(t){var e=new t.constructor(t.source,x.exec(t));return e.lastIndex=t.lastIndex,e}(t);case y:return function(t,e,r){return j(e?r(G(t),!0):G(t),H,new t.constructor)}(t,n,r);case w:return i=t,At?Object(At.call(i)):{}}}(t,N,Pt,e)}}b||(b=new _t);var R=b.get(t);if(R)return R;if(b.set(t,O),!P)var F=r?function(t){return function(t,e,r){var n=e(t);return Dt(t)?n:function(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}(n,r(t))}(t,qt,Ft)}(t):qt(t);return function(t,e){for(var r=-1,n=t?t.length:0;++r<n&&!1!==e(t[r],r););}(F||t,(function(i,o){F&&(i=t[o=i]),xt(O,o,Pt(i,e,r,n,o,t,b))})),O}function kt(t){var e=new t.constructor(t.byteLength);return new ot(e).set(new ot(t)),e}function Nt(t,e,r,n){r||(r={});for(var i=-1,o=e.length;++i<o;){var s=e[i],a=n?n(r[s],t[s],s,r,t):void 0;xt(r,s,void 0===a?t[s]:a)}return r}function Lt(t,e){var r,n,i=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function Rt(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!Wt(t)||(e=t,Z&&Z in e))&&(Gt(t)||D(t)?rt:O).test(Ht(t));var e}(r)?r:void 0}Ct.prototype.clear=function(){this.__data__=bt?bt(null):{}},Ct.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Ct.prototype.get=function(t){var e=this.__data__;if(bt){var r=e[t];return r===n?void 0:r}return tt.call(e,t)?e[t]:void 0},Ct.prototype.has=function(t){var e=this.__data__;return bt?void 0!==e[t]:tt.call(e,t)},Ct.prototype.set=function(t,e){return this.__data__[t]=bt&&void 0===e?n:e,this},Tt.prototype.clear=function(){this.__data__=[]},Tt.prototype.delete=function(t){var e=this.__data__,r=Ot(e,t);return!(r<0||(r==e.length-1?e.pop():ft.call(e,r,1),0))},Tt.prototype.get=function(t){var e=this.__data__,r=Ot(e,t);return r<0?void 0:e[r][1]},Tt.prototype.has=function(t){return Ot(this.__data__,t)>-1},Tt.prototype.set=function(t,e){var r=this.__data__,n=Ot(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},Ut.prototype.clear=function(){this.__data__={hash:new Ct,map:new(dt||Tt),string:new Ct}},Ut.prototype.delete=function(t){return Lt(this,t).delete(t)},Ut.prototype.get=function(t){return Lt(this,t).get(t)},Ut.prototype.has=function(t){return Lt(this,t).has(t)},Ut.prototype.set=function(t,e){return Lt(this,t).set(t,e),this},_t.prototype.clear=function(){this.__data__=new Tt},_t.prototype.delete=function(t){return this.__data__.delete(t)},_t.prototype.get=function(t){return this.__data__.get(t)},_t.prototype.has=function(t){return this.__data__.has(t)},_t.prototype.set=function(t,e){var r=this.__data__;if(r instanceof Tt){var n=r.__data__;if(!dt||n.length<199)return n.push([t,e]),this;r=this.__data__=new Ut(n)}return r.set(t,e),this};var Ft=ct?K(ct,Object):function(){return[]},Mt=function(t){return et.call(t)};function $t(t,e){return!!(e=null==e?i:e)&&("number"==typeof t||P.test(t))&&t>-1&&t%1==0&&t<e}function Vt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||J)}function Ht(t){if(null!=t){try{return Q.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function jt(t,e){return t===e||t!=t&&e!=e}(pt&&Mt(new pt(new ArrayBuffer(1)))!=E||dt&&Mt(new dt)!=c||yt&&Mt(yt.resolve())!=p||gt&&Mt(new gt)!=y||wt&&Mt(new wt)!=b)&&(Mt=function(t){var e=et.call(t),r=e==l?t.constructor:void 0,n=r?Ht(r):void 0;if(n)switch(n){case mt:return E;case Et:return c;case vt:return p;case Bt:return y;case St:return b}return e});var Dt=Array.isArray;function zt(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}(t.length)&&!Gt(t)}var Kt=ht||function(){return!1};function Gt(t){var e=Wt(t)?et.call(t):"";return e==u||e==f}function Wt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function qt(t){return zt(t)?function(t,e){var r=Dt(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&zt(t)}(t)&&tt.call(t,"callee")&&(!ut.call(t,"callee")||et.call(t)==o)}(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],n=r.length,i=!!n;for(var s in t)!e&&!tt.call(t,s)||i&&("length"==s||$t(s,n))||r.push(s);return r}(t):function(t){if(!Vt(t))return lt(t);var e=[];for(var r in Object(t))tt.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)}t.exports=function(t){return Pt(t,!0,!0)}},821:(t,e,r)=>{var n=r(834),i=n.Buffer;function o(t,e){for(var r in t)e[r]=t[r]}function s(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(o(n,e),e.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},s.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},619:(t,e,r)=>{"use strict";var n=r(834).Buffer;const i=r(460);class o{constructor(t){if(this.length=0,this._encoding="utf8",this._writeOffset=0,this._readOffset=0,o.isSmartBufferOptions(t))if(t.encoding&&(i.checkEncoding(t.encoding),this._encoding=t.encoding),t.size){if(!(i.isFiniteInteger(t.size)&&t.size>0))throw new Error(i.ERRORS.INVALID_SMARTBUFFER_SIZE);this._buff=n.allocUnsafe(t.size)}else if(t.buff){if(!n.isBuffer(t.buff))throw new Error(i.ERRORS.INVALID_SMARTBUFFER_BUFFER);this._buff=t.buff,this.length=t.buff.length}else this._buff=n.allocUnsafe(4096);else{if(void 0!==t)throw new Error(i.ERRORS.INVALID_SMARTBUFFER_OBJECT);this._buff=n.allocUnsafe(4096)}}static fromSize(t,e){return new this({size:t,encoding:e})}static fromBuffer(t,e){return new this({buff:t,encoding:e})}static fromOptions(t){return new this(t)}static isSmartBufferOptions(t){const e=t;return e&&(void 0!==e.encoding||void 0!==e.size||void 0!==e.buff)}readInt8(t){return this._readNumberValue(n.prototype.readInt8,1,t)}readInt16BE(t){return this._readNumberValue(n.prototype.readInt16BE,2,t)}readInt16LE(t){return this._readNumberValue(n.prototype.readInt16LE,2,t)}readInt32BE(t){return this._readNumberValue(n.prototype.readInt32BE,4,t)}readInt32LE(t){return this._readNumberValue(n.prototype.readInt32LE,4,t)}readBigInt64BE(t){return i.bigIntAndBufferInt64Check("readBigInt64BE"),this._readNumberValue(n.prototype.readBigInt64BE,8,t)}readBigInt64LE(t){return i.bigIntAndBufferInt64Check("readBigInt64LE"),this._readNumberValue(n.prototype.readBigInt64LE,8,t)}writeInt8(t,e){return this._writeNumberValue(n.prototype.writeInt8,1,t,e),this}insertInt8(t,e){return this._insertNumberValue(n.prototype.writeInt8,1,t,e)}writeInt16BE(t,e){return this._writeNumberValue(n.prototype.writeInt16BE,2,t,e)}insertInt16BE(t,e){return this._insertNumberValue(n.prototype.writeInt16BE,2,t,e)}writeInt16LE(t,e){return this._writeNumberValue(n.prototype.writeInt16LE,2,t,e)}insertInt16LE(t,e){return this._insertNumberValue(n.prototype.writeInt16LE,2,t,e)}writeInt32BE(t,e){return this._writeNumberValue(n.prototype.writeInt32BE,4,t,e)}insertInt32BE(t,e){return this._insertNumberValue(n.prototype.writeInt32BE,4,t,e)}writeInt32LE(t,e){return this._writeNumberValue(n.prototype.writeInt32LE,4,t,e)}insertInt32LE(t,e){return this._insertNumberValue(n.prototype.writeInt32LE,4,t,e)}writeBigInt64BE(t,e){return i.bigIntAndBufferInt64Check("writeBigInt64BE"),this._writeNumberValue(n.prototype.writeBigInt64BE,8,t,e)}insertBigInt64BE(t,e){return i.bigIntAndBufferInt64Check("writeBigInt64BE"),this._insertNumberValue(n.prototype.writeBigInt64BE,8,t,e)}writeBigInt64LE(t,e){return i.bigIntAndBufferInt64Check("writeBigInt64LE"),this._writeNumberValue(n.prototype.writeBigInt64LE,8,t,e)}insertBigInt64LE(t,e){return i.bigIntAndBufferInt64Check("writeBigInt64LE"),this._insertNumberValue(n.prototype.writeBigInt64LE,8,t,e)}readUInt8(t){return this._readNumberValue(n.prototype.readUInt8,1,t)}readUInt16BE(t){return this._readNumberValue(n.prototype.readUInt16BE,2,t)}readUInt16LE(t){return this._readNumberValue(n.prototype.readUInt16LE,2,t)}readUInt32BE(t){return this._readNumberValue(n.prototype.readUInt32BE,4,t)}readUInt32LE(t){return this._readNumberValue(n.prototype.readUInt32LE,4,t)}readBigUInt64BE(t){return i.bigIntAndBufferInt64Check("readBigUInt64BE"),this._readNumberValue(n.prototype.readBigUInt64BE,8,t)}readBigUInt64LE(t){return i.bigIntAndBufferInt64Check("readBigUInt64LE"),this._readNumberValue(n.prototype.readBigUInt64LE,8,t)}writeUInt8(t,e){return this._writeNumberValue(n.prototype.writeUInt8,1,t,e)}insertUInt8(t,e){return this._insertNumberValue(n.prototype.writeUInt8,1,t,e)}writeUInt16BE(t,e){return this._writeNumberValue(n.prototype.writeUInt16BE,2,t,e)}insertUInt16BE(t,e){return this._insertNumberValue(n.prototype.writeUInt16BE,2,t,e)}writeUInt16LE(t,e){return this._writeNumberValue(n.prototype.writeUInt16LE,2,t,e)}insertUInt16LE(t,e){return this._insertNumberValue(n.prototype.writeUInt16LE,2,t,e)}writeUInt32BE(t,e){return this._writeNumberValue(n.prototype.writeUInt32BE,4,t,e)}insertUInt32BE(t,e){return this._insertNumberValue(n.prototype.writeUInt32BE,4,t,e)}writeUInt32LE(t,e){return this._writeNumberValue(n.prototype.writeUInt32LE,4,t,e)}insertUInt32LE(t,e){return this._insertNumberValue(n.prototype.writeUInt32LE,4,t,e)}writeBigUInt64BE(t,e){return i.bigIntAndBufferInt64Check("writeBigUInt64BE"),this._writeNumberValue(n.prototype.writeBigUInt64BE,8,t,e)}insertBigUInt64BE(t,e){return i.bigIntAndBufferInt64Check("writeBigUInt64BE"),this._insertNumberValue(n.prototype.writeBigUInt64BE,8,t,e)}writeBigUInt64LE(t,e){return i.bigIntAndBufferInt64Check("writeBigUInt64LE"),this._writeNumberValue(n.prototype.writeBigUInt64LE,8,t,e)}insertBigUInt64LE(t,e){return i.bigIntAndBufferInt64Check("writeBigUInt64LE"),this._insertNumberValue(n.prototype.writeBigUInt64LE,8,t,e)}readFloatBE(t){return this._readNumberValue(n.prototype.readFloatBE,4,t)}readFloatLE(t){return this._readNumberValue(n.prototype.readFloatLE,4,t)}writeFloatBE(t,e){return this._writeNumberValue(n.prototype.writeFloatBE,4,t,e)}insertFloatBE(t,e){return this._insertNumberValue(n.prototype.writeFloatBE,4,t,e)}writeFloatLE(t,e){return this._writeNumberValue(n.prototype.writeFloatLE,4,t,e)}insertFloatLE(t,e){return this._insertNumberValue(n.prototype.writeFloatLE,4,t,e)}readDoubleBE(t){return this._readNumberValue(n.prototype.readDoubleBE,8,t)}readDoubleLE(t){return this._readNumberValue(n.prototype.readDoubleLE,8,t)}writeDoubleBE(t,e){return this._writeNumberValue(n.prototype.writeDoubleBE,8,t,e)}insertDoubleBE(t,e){return this._insertNumberValue(n.prototype.writeDoubleBE,8,t,e)}writeDoubleLE(t,e){return this._writeNumberValue(n.prototype.writeDoubleLE,8,t,e)}insertDoubleLE(t,e){return this._insertNumberValue(n.prototype.writeDoubleLE,8,t,e)}readString(t,e){let r;"number"==typeof t?(i.checkLengthValue(t),r=Math.min(t,this.length-this._readOffset)):(e=t,r=this.length-this._readOffset),void 0!==e&&i.checkEncoding(e);const n=this._buff.slice(this._readOffset,this._readOffset+r).toString(e||this._encoding);return this._readOffset+=r,n}insertString(t,e,r){return i.checkOffsetValue(e),this._handleString(t,!0,e,r)}writeString(t,e,r){return this._handleString(t,!1,e,r)}readStringNT(t){void 0!==t&&i.checkEncoding(t);let e=this.length;for(let t=this._readOffset;t<this.length;t++)if(0===this._buff[t]){e=t;break}const r=this._buff.slice(this._readOffset,e);return this._readOffset=e+1,r.toString(t||this._encoding)}insertStringNT(t,e,r){return i.checkOffsetValue(e),this.insertString(t,e,r),this.insertUInt8(0,e+t.length),this}writeStringNT(t,e,r){return this.writeString(t,e,r),this.writeUInt8(0,"number"==typeof e?e+t.length:this.writeOffset),this}readBuffer(t){void 0!==t&&i.checkLengthValue(t);const e="number"==typeof t?t:this.length,r=Math.min(this.length,this._readOffset+e),n=this._buff.slice(this._readOffset,r);return this._readOffset=r,n}insertBuffer(t,e){return i.checkOffsetValue(e),this._handleBuffer(t,!0,e)}writeBuffer(t,e){return this._handleBuffer(t,!1,e)}readBufferNT(){let t=this.length;for(let e=this._readOffset;e<this.length;e++)if(0===this._buff[e]){t=e;break}const e=this._buff.slice(this._readOffset,t);return this._readOffset=t+1,e}insertBufferNT(t,e){return i.checkOffsetValue(e),this.insertBuffer(t,e),this.insertUInt8(0,e+t.length),this}writeBufferNT(t,e){return void 0!==e&&i.checkOffsetValue(e),this.writeBuffer(t,e),this.writeUInt8(0,"number"==typeof e?e+t.length:this._writeOffset),this}clear(){return this._writeOffset=0,this._readOffset=0,this.length=0,this}remaining(){return this.length-this._readOffset}get readOffset(){return this._readOffset}set readOffset(t){i.checkOffsetValue(t),i.checkTargetOffset(t,this),this._readOffset=t}get writeOffset(){return this._writeOffset}set writeOffset(t){i.checkOffsetValue(t),i.checkTargetOffset(t,this),this._writeOffset=t}get encoding(){return this._encoding}set encoding(t){i.checkEncoding(t),this._encoding=t}get internalBuffer(){return this._buff}toBuffer(){return this._buff.slice(0,this.length)}toString(t){const e="string"==typeof t?t:this._encoding;return i.checkEncoding(e),this._buff.toString(e,0,this.length)}destroy(){return this.clear(),this}_handleString(t,e,r,o){let s=this._writeOffset,a=this._encoding;"number"==typeof r?s=r:"string"==typeof r&&(i.checkEncoding(r),a=r),"string"==typeof o&&(i.checkEncoding(o),a=o);const u=n.byteLength(t,a);return e?this.ensureInsertable(u,s):this._ensureWriteable(u,s),this._buff.write(t,s,u,a),e?this._writeOffset+=u:"number"==typeof r?this._writeOffset=Math.max(this._writeOffset,s+u):this._writeOffset+=u,this}_handleBuffer(t,e,r){const n="number"==typeof r?r:this._writeOffset;return e?this.ensureInsertable(t.length,n):this._ensureWriteable(t.length,n),t.copy(this._buff,n),e?this._writeOffset+=t.length:"number"==typeof r?this._writeOffset=Math.max(this._writeOffset,n+t.length):this._writeOffset+=t.length,this}ensureReadable(t,e){let r=this._readOffset;if(void 0!==e&&(i.checkOffsetValue(e),r=e),r<0||r+t>this.length)throw new Error(i.ERRORS.INVALID_READ_BEYOND_BOUNDS)}ensureInsertable(t,e){i.checkOffsetValue(e),this._ensureCapacity(this.length+t),e<this.length&&this._buff.copy(this._buff,e+t,e,this._buff.length),e+t>this.length?this.length=e+t:this.length+=t}_ensureWriteable(t,e){const r="number"==typeof e?e:this._writeOffset;this._ensureCapacity(r+t),r+t>this.length&&(this.length=r+t)}_ensureCapacity(t){const e=this._buff.length;if(t>e){let r=this._buff,i=3*e/2+1;i<t&&(i=t),this._buff=n.allocUnsafe(i),r.copy(this._buff,0,0,e)}}_readNumberValue(t,e,r){this.ensureReadable(e,r);const n=t.call(this._buff,"number"==typeof r?r:this._readOffset);return void 0===r&&(this._readOffset+=e),n}_insertNumberValue(t,e,r,n){return i.checkOffsetValue(n),this.ensureInsertable(e,n),t.call(this._buff,r,n),this._writeOffset+=e,this}_writeNumberValue(t,e,r,n){if("number"==typeof n){if(n<0)throw new Error(i.ERRORS.INVALID_WRITE_BEYOND_BOUNDS);i.checkOffsetValue(n)}const o="number"==typeof n?n:this._writeOffset;return this._ensureWriteable(e,o),t.call(this._buff,r,o),"number"==typeof n?this._writeOffset=Math.max(this._writeOffset,o+e):this._writeOffset+=e,this}}e.$=o},460:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(834),i={INVALID_ENCODING:"Invalid encoding provided. Please specify a valid encoding the internal Node.js Buffer supports.",INVALID_SMARTBUFFER_SIZE:"Invalid size provided. Size must be a valid integer greater than zero.",INVALID_SMARTBUFFER_BUFFER:"Invalid Buffer provided in SmartBufferOptions.",INVALID_SMARTBUFFER_OBJECT:"Invalid SmartBufferOptions object supplied to SmartBuffer constructor or factory methods.",INVALID_OFFSET:"An invalid offset value was provided.",INVALID_OFFSET_NON_NUMBER:"An invalid offset value was provided. A numeric value is required.",INVALID_LENGTH:"An invalid length value was provided.",INVALID_LENGTH_NON_NUMBER:"An invalid length value was provived. A numeric value is required.",INVALID_TARGET_OFFSET:"Target offset is beyond the bounds of the internal SmartBuffer data.",INVALID_TARGET_LENGTH:"Specified length value moves cursor beyong the bounds of the internal SmartBuffer data.",INVALID_READ_BEYOND_BOUNDS:"Attempted to read beyond the bounds of the managed data.",INVALID_WRITE_BEYOND_BOUNDS:"Attempted to write beyond the bounds of the managed data."};function o(t){return"number"==typeof t&&isFinite(t)&&function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}(t)}function s(t,e){if("number"!=typeof t)throw new Error(e?i.INVALID_OFFSET_NON_NUMBER:i.INVALID_LENGTH_NON_NUMBER);if(!o(t)||t<0)throw new Error(e?i.INVALID_OFFSET:i.INVALID_LENGTH)}e.ERRORS=i,e.checkEncoding=function(t){if(!n.Buffer.isEncoding(t))throw new Error(i.INVALID_ENCODING)},e.isFiniteInteger=o,e.checkLengthValue=function(t){s(t,!1)},e.checkOffsetValue=function(t){s(t,!0)},e.checkTargetOffset=function(t,e){if(t<0||t>e.length)throw new Error(i.INVALID_TARGET_OFFSET)},e.bigIntAndBufferInt64Check=function(t){if("undefined"==typeof BigInt)throw new Error("Platform does not support JS BigInt type.");if(void 0===n.Buffer.prototype[t])throw new Error(`Platform does not support Buffer.prototype.${t}.`)}},314:()=>{},96:()=>{}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var n={};return(()=>{"use strict";r.r(n),r.d(n,{AddressHashMode:()=>K,AddressVersion:()=>G,AnchorMode:()=>$,AssetType:()=>X,AuthFieldType:()=>An,AuthType:()=>z,Authorization:()=>l.Authorization,BooleanCV:()=>i.BooleanCV,BufferArray:()=>ni,BufferCV:()=>e.BufferCV,BufferReader:()=>hn,CLARITY_INT_BYTE_SIZE:()=>x,CLARITY_INT_SIZE:()=>_,COINBASE_BUFFER_LENGTH_BYTES:()=>O,COMPRESSED_PUBKEY_LENGTH_BYTES:()=>k,ChainID:()=>C,ClarityAbiTypeId:()=>To,ClarityType:()=>Fr,ClarityValue:()=>p.ClarityValue,CoinbasePayload:()=>h.CoinbasePayload,ContractCallPayload:()=>h.ContractCallPayload,ContractPrincipalCV:()=>o.ContractPrincipalCV,DEFAULT_CHAIN_ID:()=>T,DEFAULT_CORE_NODE_API_URL:()=>R,DEFAULT_TRANSACTION_VERSION:()=>H,FalseCV:()=>i.FalseCV,FungibleConditionCode:()=>q,IntCV:()=>t.IntCV,ListCV:()=>u.ListCV,MAX_STRING_LENGTH_BYTES:()=>U,MEMO_MAX_LENGTH_BYTES:()=>L,NonFungibleConditionCode:()=>Y,NoneCV:()=>a.NoneCV,OptionalCV:()=>a.OptionalCV,PayloadType:()=>M,PoisonPayload:()=>h.PoisonPayload,PostConditionMode:()=>j,PostConditionPrincipalID:()=>J,PostConditionType:()=>D,PrincipalCV:()=>o.PrincipalCV,PubKeyEncoding:()=>W,RECOVERABLE_ECDSA_SIG_LENGTH_BYTES:()=>P,ResponseCV:()=>s.ResponseCV,ResponseErrorCV:()=>s.ResponseErrorCV,ResponseOkCV:()=>s.ResponseOkCV,STRUCTURED_DATA_PREFIX:()=>Bs,SmartContractPayload:()=>h.SmartContractPayload,SomeCV:()=>a.SomeCV,SpendingCondition:()=>l.SpendingCondition,SponsoredAuthorization:()=>l.SponsoredAuthorization,StacksMessageType:()=>F,StacksTransaction:()=>co,StandardAuthorization:()=>l.StandardAuthorization,StandardPrincipalCV:()=>o.StandardPrincipalCV,StringAsciiCV:()=>c.StringAsciiCV,StringUtf8CV:()=>c.StringUtf8CV,TokenTransferPayload:()=>h.TokenTransferPayload,TransactionSigner:()=>Do,TransactionVersion:()=>V,TrueCV:()=>i.TrueCV,TupleCV:()=>f.TupleCV,TxRejectedReason:()=>Z,UIntCV:()=>t.UIntCV,UNCOMPRESSED_PUBKEY_LENGTH_BYTES:()=>N,abiFunctionToString:()=>$o,addressFromHashMode:()=>Nn,addressFromPublicKeys:()=>Ln,addressFromVersionHash:()=>Ze,addressHashModeToVersion:()=>Xe,addressToString:()=>Qe,broadcastRawTransaction:()=>rs,broadcastTransaction:()=>es,bufferCV:()=>zr,bufferCVFromString:()=>Kr,bytesToHex:()=>A,callReadOnlyFunction:()=>ms,cloneDeep:()=>ui,codeBodyString:()=>jn,compressPublicKey:()=>Er,contractPrincipalCV:()=>Zr,contractPrincipalCVFromAddress:()=>Qr,contractPrincipalCVFromStandard:()=>tn,createAddress:()=>kr,createAssetInfo:()=>Pr,createContractPrincipal:()=>Lr,createEmptyAddress:()=>kn,createFungiblePostCondition:()=>po,createLPList:()=>qn,createLPString:()=>Or,createMemoString:()=>Dn,createMessageSignature:()=>Je,createMultiSigSpendingCondition:()=>ki,createNonFungiblePostCondition:()=>yo,createSTXPostCondition:()=>lo,createSingleSigSpendingCondition:()=>Pi,createSponsoredAuth:()=>Wi,createStacksPrivateKey:()=>Br,createStacksPublicKey:()=>hr,createStandardAuth:()=>Gi,createStandardPrincipal:()=>Rr,createTransactionAuthField:()=>Tn,cvToHex:()=>wi,cvToJSON:()=>bo,cvToString:()=>go,cvToValue:()=>wo,decodeStructuredDataSignature:()=>As,deserializeAddress:()=>Fn,deserializeAssetInfo:()=>Wn,deserializeAuthorization:()=>ro,deserializeCV:()=>mn,deserializeLPList:()=>Jn,deserializeLPString:()=>Hn,deserializeMemoString:()=>Kn,deserializeMessageSignature:()=>Cn,deserializeMultiSigSpendingCondition:()=>$i,deserializePostCondition:()=>Zn,deserializePrincipal:()=>$n,deserializePublicKey:()=>vr,deserializeSingleSigSpendingCondition:()=>Mi,deserializeSpendingCondition:()=>Hi,deserializeStacksMessage:()=>Pn,deserializeTransaction:()=>ho,deserializeTransactionAuthField:()=>Un,emptyMessageSignature:()=>Oi,encodeClarityValue:()=>Fo,encodeStructuredData:()=>Is,estimateContractDeploy:()=>as,estimateContractFunctionCall:()=>cs,estimateTransaction:()=>ts,estimateTransactionByteLength:()=>vs,estimateTransfer:()=>Qo,exceedsMaxLengthBytes:()=>ai,falseCV:()=>Wr,getAbi:()=>ns,getAddressFromPrivateKey:()=>fr,getAddressFromPublicKey:()=>cr,getCVTypeString:()=>mo,getFee:()=>Xi,getNonce:()=>Zo,getPublicKey:()=>Tr,getTypeString:()=>Mo,getTypeUnion:()=>Ro,hash160:()=>hi,hashP2PKH:()=>li,hashP2SH:()=>di,hashP2WPKH:()=>pi,hashP2WSH:()=>yi,hashStructuredData:()=>Ss,hexToCV:()=>bi,intCV:()=>jr,intoInitialSighashAuth:()=>qi,isClarityAbiBuffer:()=>_o,isClarityAbiList:()=>Lo,isClarityAbiOptional:()=>ko,isClarityAbiPrimitive:()=>Uo,isClarityAbiResponse:()=>Po,isClarityAbiStringAscii:()=>xo,isClarityAbiStringUtf8:()=>Oo,isClarityAbiTuple:()=>No,isClarityName:()=>gi,isCompressed:()=>gr,isSingleSig:()=>Ni,leftPadHex:()=>ii,leftPadHexToLength:()=>oi,listCV:()=>sn,makeContractCall:()=>ls,makeContractDeploy:()=>us,makeContractFungiblePostCondition:()=>gs,makeContractNonFungiblePostCondition:()=>bs,makeContractSTXPostCondition:()=>ds,makeRandomPrivKey:()=>Sr,makeSTXTokenTransfer:()=>ss,makeSigHashPreSign:()=>ji,makeStandardFungiblePostCondition:()=>ys,makeStandardNonFungiblePostCondition:()=>ws,makeStandardSTXPostCondition:()=>ps,makeUnsignedContractCall:()=>hs,makeUnsignedContractDeploy:()=>fs,makeUnsignedSTXTokenTransfer:()=>os,nextSignature:()=>zi,nextVerification:()=>Ki,noneCV:()=>nn,omit:()=>fi,parseAssetInfoString:()=>xr,parsePrincipalString:()=>Nr,parseReadOnlyResponse:()=>mi,parseRecoverableSignature:()=>Cr,parseToCV:()=>jo,privateKeyToString:()=>Ur,pubKeyfromPrivKey:()=>mr,publicKeyFromBuffer:()=>yr,publicKeyFromSignature:()=>dr,publicKeyFromSignatureRsv:()=>pr,publicKeyFromSignatureVrs:()=>lr,publicKeyToAddress:()=>_r,publicKeyToString:()=>wr,randomBytes:()=>ri,responseErrorCV:()=>en,responseOkCV:()=>rn,rightPadHexToLength:()=>si,serializeAddress:()=>Rn,serializeAssetInfo:()=>Gn,serializeAuthorization:()=>eo,serializeCV:()=>ei,serializeLPList:()=>Yn,serializeLPString:()=>Vn,serializeMemoString:()=>zn,serializeMessageSignature:()=>_n,serializeMultiSigSpendingCondition:()=>Fi,serializePayload:()=>Sn,serializePostCondition:()=>Xn,serializePrincipal:()=>Mn,serializePublicKey:()=>br,serializeSingleSigSpendingCondition:()=>Ri,serializeSpendingCondition:()=>Vi,serializeStacksMessage:()=>On,serializeTransactionAuthField:()=>xn,setFee:()=>Ji,setNonce:()=>Zi,setSponsor:()=>to,setSponsorNonce:()=>Qi,signMessageHashRsv:()=>Ar,signStructuredData:()=>Cs,signWithKey:()=>Ir,someCV:()=>on,sponsorTransaction:()=>Es,standardPrincipalCV:()=>Jr,standardPrincipalCVFromAddress:()=>Xr,stringAsciiCV:()=>wn,stringUtf8CV:()=>bn,trueCV:()=>Gr,tupleCV:()=>an,txidFromData:()=>ci,uintCV:()=>Dr,validateContractCall:()=>Ho,validateStacksAddress:()=>Ei,validateTxId:()=>vi,verifyOrigin:()=>Yi});var t={};r.r(t),r.d(t,{q:()=>jr,R:()=>Dr});var e={};r.r(e),r.d(e,{B:()=>zr,f:()=>Kr});var i={};r.r(i),r.d(i,{e:()=>Wr,n:()=>Gr});var o={};r.r(o),r.d(o,{tM:()=>Zr,I0:()=>Qr,U2:()=>tn,L0:()=>Yr,OY:()=>qr,Op:()=>Jr,D9:()=>Xr});var s={};r.r(s),r.d(s,{I:()=>en,R:()=>rn});var a={};r.r(a),r.d(a,{hr:()=>nn,PK:()=>on});var u={};r.r(u),r.d(u,{B:()=>sn});var f={};r.r(f),r.d(f,{M:()=>an});var c={};r.r(c),r.d(c,{jx:()=>wn,M0:()=>bn});var h={};r.r(h),r.d(h,{ql:()=>vn,UN:()=>Bn,qu:()=>En,LV:()=>In,al:()=>Sn});var l={};r.r(l),r.d(l,{C:()=>ki,Tm:()=>Pi,p1:()=>Wi,Pd:()=>Gi,XH:()=>ro,fe:()=>$i,Dt:()=>Mi,lW:()=>Hi,TR:()=>Oi,JK:()=>Xi,m5:()=>qi,GP:()=>Ni,k4:()=>ji,a6:()=>zi,Fd:()=>Ki,h$:()=>eo,H3:()=>Fi,QP:()=>Ri,Bq:()=>Vi,P_:()=>Ji,nT:()=>Zi,fc:()=>to,K2:()=>Qi,dd:()=>Yi});var p={};r.r(p),r.d(p,{YN:()=>bo,Is:()=>go,md:()=>wo,eH:()=>mo});var d=r(834),y=r(834).Buffer;const g=void 0!==y?y:d.Buffer;function w(t,e,r){return S(b(t,e),r)}function b(t,e){let r=t;if("number"==typeof r){if(!Number.isInteger(r))throw new RangeError("Invalid value. Values of type 'number' must be an integer.");return BigInt(r)}if("string"==typeof r)if(r.toLowerCase().startsWith("0x")){let t=r.slice(2);t=t.padStart(t.length+t.length%2,"0"),r=g.from(t,"hex")}else try{return BigInt(r)}catch(t){if(t instanceof SyntaxError)throw new RangeError(`Invalid value. String integer '${r}' is not finite.`)}if("bigint"==typeof r)return r;if(r instanceof Uint8Array||g.isBuffer(r)){if(e){const t=function(t,e){return function(t,e){return t&BigInt(1)<<e}(t,e-BigInt(1))?t-(BigInt(1)<<e):t}(BigInt(`0x${A(r)}`),BigInt(8*r.byteLength));return BigInt(t.toString())}return BigInt(`0x${A(r)}`)}if(null!=r&&"object"==typeof r&&"BN"===r.constructor.name)return BigInt(r.toString());throw new TypeError("Invalid value type. Must be a number, bigint, integer-string, hex-string, or Buffer.")}function m(t){return t.startsWith("0x")?t:`0x${t}`}function E(t){if("string"!=typeof t)throw new TypeError("hexToBigInt: expected string, got "+typeof t);return BigInt(`0x${t}`)}function v(t,e=8){return("bigint"==typeof t?t:b(t,!1)).toString(16).padStart(2*e,"0")}function B(t){return parseInt(t,16)}function S(t,e=16){const r=v(t,e);return g.from(function(t){if("string"!=typeof t)throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){const n=2*r,i=t.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");e[r]=o}return e}(r))}const I=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function A(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(const r of t)e+=I[r];return e}var C=(t=>(t[t.Testnet=2147483648]="Testnet",t[t.Mainnet=1]="Mainnet",t))(C||{});const T=1,U=128,_=128,x=16,O=32,P=65,k=32,N=64,L=34,R="https://stacks-node-api.mainnet.stacks.co";var F=(t=>(t[t.Address=0]="Address",t[t.Principal=1]="Principal",t[t.LengthPrefixedString=2]="LengthPrefixedString",t[t.MemoString=3]="MemoString",t[t.AssetInfo=4]="AssetInfo",t[t.PostCondition=5]="PostCondition",t[t.PublicKey=6]="PublicKey",t[t.LengthPrefixedList=7]="LengthPrefixedList",t[t.Payload=8]="Payload",t[t.MessageSignature=9]="MessageSignature",t[t.StructuredDataSignature=10]="StructuredDataSignature",t[t.TransactionAuthField=11]="TransactionAuthField",t))(F||{}),M=(t=>(t[t.TokenTransfer=0]="TokenTransfer",t[t.SmartContract=1]="SmartContract",t[t.ContractCall=2]="ContractCall",t[t.PoisonMicroblock=3]="PoisonMicroblock",t[t.Coinbase=4]="Coinbase",t))(M||{}),$=(t=>(t[t.OnChainOnly=1]="OnChainOnly",t[t.OffChainOnly=2]="OffChainOnly",t[t.Any=3]="Any",t))($||{}),V=(t=>(t[t.Mainnet=0]="Mainnet",t[t.Testnet=128]="Testnet",t))(V||{});const H=0;var j=(t=>(t[t.Allow=1]="Allow",t[t.Deny=2]="Deny",t))(j||{}),D=(t=>(t[t.STX=0]="STX",t[t.Fungible=1]="Fungible",t[t.NonFungible=2]="NonFungible",t))(D||{}),z=(t=>(t[t.Standard=4]="Standard",t[t.Sponsored=5]="Sponsored",t))(z||{}),K=(t=>(t[t.SerializeP2PKH=0]="SerializeP2PKH",t[t.SerializeP2SH=1]="SerializeP2SH",t[t.SerializeP2WPKH=2]="SerializeP2WPKH",t[t.SerializeP2WSH=3]="SerializeP2WSH",t))(K||{}),G=(t=>(t[t.MainnetSingleSig=22]="MainnetSingleSig",t[t.MainnetMultiSig=20]="MainnetMultiSig",t[t.TestnetSingleSig=26]="TestnetSingleSig",t[t.TestnetMultiSig=21]="TestnetMultiSig",t))(G||{}),W=(t=>(t[t.Compressed=0]="Compressed",t[t.Uncompressed=1]="Uncompressed",t))(W||{}),q=(t=>(t[t.Equal=1]="Equal",t[t.Greater=2]="Greater",t[t.GreaterEqual=3]="GreaterEqual",t[t.Less=4]="Less",t[t.LessEqual=5]="LessEqual",t))(q||{}),Y=(t=>(t[t.DoesNotOwn=16]="DoesNotOwn",t[t.Owns=17]="Owns",t))(Y||{}),J=(t=>(t[t.Origin=1]="Origin",t[t.Standard=2]="Standard",t[t.Contract=3]="Contract",t))(J||{}),X=(t=>(t[t.STX=0]="STX",t[t.Fungible=1]="Fungible",t[t.NonFungible=2]="NonFungible",t))(X||{}),Z=(t=>(t.Serialization="Serialization",t.Deserialization="Deserialization",t.SignatureValidation="SignatureValidation",t.FeeTooLow="FeeTooLow",t.BadNonce="BadNonce",t.NotEnoughFunds="NotEnoughFunds",t.NoSuchContract="NoSuchContract",t.NoSuchPublicFunction="NoSuchPublicFunction",t.BadFunctionArgument="BadFunctionArgument",t.ContractAlreadyExists="ContractAlreadyExists",t.PoisonMicroblocksDoNotConflict="PoisonMicroblocksDoNotConflict",t.PoisonMicroblockHasUnknownPubKeyHash="PoisonMicroblockHasUnknownPubKeyHash",t.PoisonMicroblockIsInvalid="PoisonMicroblockIsInvalid",t.BadAddressVersionByte="BadAddressVersionByte",t.NoCoinbaseViaMempool="NoCoinbaseViaMempool",t.ServerFailureNoSuchChainTip="ServerFailureNoSuchChainTip",t.ServerFailureDatabase="ServerFailureDatabase",t.ServerFailureOther="ServerFailureOther",t))(Z||{});"object"==typeof self&&"crypto"in self&&self.crypto;const Q=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),tt=(t,e)=>t<<32-e|t>>>e;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function et(t){if("string"==typeof t&&(t=function(t){if("string"!=typeof t)throw new TypeError("utf8ToBytes expected string, got "+typeof t);return(new TextEncoder).encode(t)}(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}function rt(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0"))),(()=>{const t="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);try{if(t){const{setImmediate:e}=t("timers")}}catch(t){}})();class nt{clone(){return this._cloneInto()}}function it(t){const e=e=>t().update(et(e)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}class ot extends nt{constructor(t,e,r,n){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Q(this.buffer)}update(t){if(this.destroyed)throw new Error("instance is destroyed");const{view:e,buffer:r,blockLen:n,finished:i}=this;if(i)throw new Error("digest() was already called");const o=(t=et(t)).length;for(let i=0;i<o;){const s=Math.min(n-this.pos,o-i);if(s!==n)r.set(t.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===n&&(this.process(e,0),this.pos=0);else{const e=Q(t);for(;n<=o-i;i+=n)this.process(e,i)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){if(this.destroyed)throw new Error("instance is destroyed");if(!(t instanceof Uint8Array)||t.length<this.outputLen)throw new Error("_Sha2: Invalid output buffer");if(this.finished)throw new Error("digest() was already called");this.finished=!0;const{buffer:e,view:r,blockLen:n,isLE:i}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(r,0),o=0);for(let t=o;t<n;t++)e[t]=0;!function(t,e,r,n){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,r,n);const i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),u=n?4:0,f=n?0:4;t.setUint32(e+u,s,n),t.setUint32(e+f,a,n)}(r,n-8,BigInt(8*this.length),i),this.process(r,0);const s=Q(t);this.get().forEach(((t,e)=>s.setUint32(4*e,t,i)))}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return t.length=n,t.pos=s,t.finished=i,t.destroyed=o,n%e&&t.buffer.set(r),t}}const st=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),at=Uint8Array.from({length:16},((t,e)=>e)),ut=at.map((t=>(9*t+5)%16));let ft=[at],ct=[ut];for(let t=0;t<4;t++)for(let e of[ft,ct])e.push(e[t].map((t=>st[t])));const ht=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((t=>new Uint8Array(t))),lt=ft.map(((t,e)=>t.map((t=>ht[e][t])))),pt=ct.map(((t,e)=>t.map((t=>ht[e][t])))),dt=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),yt=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),gt=(t,e)=>t<<e|t>>>32-e;function wt(t,e,r,n){return 0===t?e^r^n:1===t?e&r|~e&n:2===t?(e|~r)^n:3===t?e&n|r&~n:e^(r|~n)}const bt=new Uint32Array(16);class mt extends ot{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:t,h1:e,h2:r,h3:n,h4:i}=this;return[t,e,r,n,i]}set(t,e,r,n,i){this.h0=0|t,this.h1=0|e,this.h2=0|r,this.h3=0|n,this.h4=0|i}process(t,e){for(let r=0;r<16;r++,e+=4)bt[r]=t.getUint32(e,!0);let r=0|this.h0,n=r,i=0|this.h1,o=i,s=0|this.h2,a=s,u=0|this.h3,f=u,c=0|this.h4,h=c;for(let t=0;t<5;t++){const e=4-t,l=dt[t],p=yt[t],d=ft[t],y=ct[t],g=lt[t],w=pt[t];for(let e=0;e<16;e++){const n=gt(r+wt(t,i,s,u)+bt[d[e]]+l,g[e])+c|0;r=c,c=u,u=0|gt(s,10),s=i,i=n}for(let t=0;t<16;t++){const r=gt(n+wt(e,o,a,f)+bt[y[t]]+p,w[t])+h|0;n=h,h=f,f=0|gt(a,10),a=o,o=r}}this.set(this.h1+s+f|0,this.h2+u+h|0,this.h3+c+n|0,this.h4+r+o|0,this.h0+i+a|0)}roundClean(){bt.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const Et=it((()=>new mt)),vt=(t,e,r)=>t&e^t&r^e&r,Bt=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),St=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),It=new Uint32Array(64);class At extends ot{constructor(){super(64,32,8,!1),this.A=0|St[0],this.B=0|St[1],this.C=0|St[2],this.D=0|St[3],this.E=0|St[4],this.F=0|St[5],this.G=0|St[6],this.H=0|St[7]}get(){const{A:t,B:e,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[t,e,r,n,i,o,s,a]}set(t,e,r,n,i,o,s,a){this.A=0|t,this.B=0|e,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(t,e){for(let r=0;r<16;r++,e+=4)It[r]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=It[t-15],r=It[t-2],n=tt(e,7)^tt(e,18)^e>>>3,i=tt(r,17)^tt(r,19)^r>>>10;It[t]=i+It[t-7]+n+It[t-16]|0}let{A:r,B:n,C:i,D:o,E:s,F:a,G:u,H:f}=this;for(let t=0;t<64;t++){const e=f+(tt(s,6)^tt(s,11)^tt(s,25))+((c=s)&a^~c&u)+Bt[t]+It[t]|0,h=(tt(r,2)^tt(r,13)^tt(r,22))+vt(r,n,i)|0;f=u,u=a,a=s,s=o+e|0,o=i,i=n,n=r,r=e+h|0}var c;r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(r,n,i,o,s,a,u,f)}roundClean(){It.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Ct=it((()=>new At)),Tt=BigInt(2**32-1),Ut=BigInt(32);function _t(t,e=!1){return e?{h:Number(t&Tt),l:Number(t>>Ut&Tt)}:{h:0|Number(t>>Ut&Tt),l:0|Number(t&Tt)}}const xt=(t,e,r)=>t>>>r,Ot=(t,e,r)=>t<<32-r|e>>>r,Pt=(t,e,r)=>t>>>r|e<<32-r,kt=(t,e,r)=>t<<32-r|e>>>r,Nt=(t,e,r)=>t<<64-r|e>>>r-32,Lt=(t,e,r)=>t>>>r-32|e<<64-r;function Rt(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:0|i}}const Ft=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),Mt=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,$t=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),Vt=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,Ht=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),jt=(t,e,r,n,i,o)=>e+r+n+i+o+(t/2**32|0)|0,[Dt,zt]=function(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:o,l:s}=_t(t[i],e);[r[i],n[i]]=[o,s]}return[r,n]}(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((t=>BigInt(t)))),Kt=new Uint32Array(80),Gt=new Uint32Array(80);class Wt extends ot{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:r,Bl:n,Ch:i,Cl:o,Dh:s,Dl:a,Eh:u,El:f,Fh:c,Fl:h,Gh:l,Gl:p,Hh:d,Hl:y}=this;return[t,e,r,n,i,o,s,a,u,f,c,h,l,p,d,y]}set(t,e,r,n,i,o,s,a,u,f,c,h,l,p,d,y){this.Ah=0|t,this.Al=0|e,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|o,this.Dh=0|s,this.Dl=0|a,this.Eh=0|u,this.El=0|f,this.Fh=0|c,this.Fl=0|h,this.Gh=0|l,this.Gl=0|p,this.Hh=0|d,this.Hl=0|y}process(t,e){for(let r=0;r<16;r++,e+=4)Kt[r]=t.getUint32(e),Gt[r]=t.getUint32(e+=4);for(let t=16;t<80;t++){const e=0|Kt[t-15],r=0|Gt[t-15],n=Pt(e,r,1)^Pt(e,r,8)^xt(e,0,7),i=kt(e,r,1)^kt(e,r,8)^Ot(e,r,7),o=0|Kt[t-2],s=0|Gt[t-2],a=Pt(o,s,19)^Nt(o,s,61)^xt(o,0,6),u=kt(o,s,19)^Lt(o,s,61)^Ot(o,s,6),f=$t(i,u,Gt[t-7],Gt[t-16]),c=Vt(f,n,a,Kt[t-7],Kt[t-16]);Kt[t]=0|c,Gt[t]=0|f}let{Ah:r,Al:n,Bh:i,Bl:o,Ch:s,Cl:a,Dh:u,Dl:f,Eh:c,El:h,Fh:l,Fl:p,Gh:d,Gl:y,Hh:g,Hl:w}=this;for(let t=0;t<80;t++){const e=Pt(c,h,14)^Pt(c,h,18)^Nt(c,h,41),b=kt(c,h,14)^kt(c,h,18)^Lt(c,h,41),m=c&l^~c&d,E=Ht(w,b,h&p^~h&y,zt[t],Gt[t]),v=jt(E,g,e,m,Dt[t],Kt[t]),B=0|E,S=Pt(r,n,28)^Nt(r,n,34)^Nt(r,n,39),I=kt(r,n,28)^Lt(r,n,34)^Lt(r,n,39),A=r&i^r&s^i&s,C=n&o^n&a^o&a;g=0|d,w=0|y,d=0|l,y=0|p,l=0|c,p=0|h,({h:c,l:h}=Rt(0|u,0|f,0|v,0|B)),u=0|s,f=0|a,s=0|i,a=0|o,i=0|r,o=0|n;const T=Ft(B,I,C);r=Mt(T,v,S,A),n=0|T}({h:r,l:n}=Rt(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:o}=Rt(0|this.Bh,0|this.Bl,0|i,0|o)),({h:s,l:a}=Rt(0|this.Ch,0|this.Cl,0|s,0|a)),({h:u,l:f}=Rt(0|this.Dh,0|this.Dl,0|u,0|f)),({h:c,l:h}=Rt(0|this.Eh,0|this.El,0|c,0|h)),({h:l,l:p}=Rt(0|this.Fh,0|this.Fl,0|l,0|p)),({h:d,l:y}=Rt(0|this.Gh,0|this.Gl,0|d,0|y)),({h:g,l:w}=Rt(0|this.Hh,0|this.Hl,0|g,0|w)),this.set(r,n,i,o,s,a,u,f,c,h,l,p,d,y,g,w)}roundClean(){Kt.fill(0),Gt.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class qt extends Wt{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class Yt extends Wt{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}it((()=>new Wt));const Jt=it((()=>new qt));it((()=>new Yt));var Xt=r(314);const Zt=BigInt(0),Qt=BigInt(1),te=BigInt(2),ee=BigInt(3),re=BigInt(8),ne=te**BigInt(256),ie={a:Zt,b:BigInt(7),P:ne-te**BigInt(32)-BigInt(977),n:ne-BigInt("432420386565659656852420866394968145599"),h:Qt,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")};function oe(t){const{a:e,b:r}=ie,n=Ie(t*t),i=Ie(n*t);return Ie(i+e*t+r)}const se=ie.a===Zt;class ae{constructor(t,e,r){this.x=t,this.y=e,this.z=r}static fromAffine(t){if(!(t instanceof fe))throw new TypeError("JacobianPoint#fromAffine: expected Point");return new ae(t.x,t.y,Qt)}static toAffineBatch(t){const e=function(t,e=ie.P){const r=new Array(t.length),n=Ce(t.reduce(((t,n,i)=>n===Zt?t:(r[i]=t,Ie(t*n,e))),Qt),e);return t.reduceRight(((t,n,i)=>n===Zt?t:(r[i]=Ie(t*r[i],e),Ie(t*n,e))),n),r}(t.map((t=>t.z)));return t.map(((t,r)=>t.toAffine(e[r])))}static normalizeZ(t){return ae.toAffineBatch(t).map(ae.fromAffine)}equals(t){if(!(t instanceof ae))throw new TypeError("JacobianPoint expected");const{x:e,y:r,z:n}=this,{x:i,y:o,z:s}=t,a=Ie(n**te),u=Ie(s**te),f=Ie(e*u),c=Ie(i*a),h=Ie(Ie(r*s)*u),l=Ie(Ie(o*n)*a);return f===c&&h===l}negate(){return new ae(this.x,Ie(-this.y),this.z)}double(){const{x:t,y:e,z:r}=this,n=Ie(t**te),i=Ie(e**te),o=Ie(i**te),s=Ie(te*(Ie((t+i)**te)-n-o)),a=Ie(ee*n),u=Ie(a**te),f=Ie(u-te*s),c=Ie(a*(s-f)-re*o),h=Ie(te*e*r);return new ae(f,c,h)}add(t){if(!(t instanceof ae))throw new TypeError("JacobianPoint expected");const{x:e,y:r,z:n}=this,{x:i,y:o,z:s}=t;if(i===Zt||o===Zt)return this;if(e===Zt||r===Zt)return t;const a=Ie(n**te),u=Ie(s**te),f=Ie(e*u),c=Ie(i*a),h=Ie(Ie(r*s)*u),l=Ie(Ie(o*n)*a),p=Ie(c-f),d=Ie(l-h);if(p===Zt)return d===Zt?this.double():ae.ZERO;const y=Ie(p**te),g=Ie(p*y),w=Ie(f*y),b=Ie(d**te-g-te*w),m=Ie(d*(w-b)-h*g),E=Ie(n*s*p);return new ae(b,m,E)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){let e=Se(t);ae.BASE;const r=ae.ZERO;if(e===Zt)return r;if(e===Qt)return this;if(!se){let t=r,n=this;for(;e>Zt;)e&Qt&&(t=t.add(n)),n=n.double(),e>>=Qt;return t}let{k1neg:n,k1:i,k2neg:o,k2:s}=_e(e),a=r,u=r,f=this;for(;i>Zt||s>Zt;)i&Qt&&(a=a.add(f)),s&Qt&&(u=u.add(f)),f=f.double(),i>>=Qt,s>>=Qt;return n&&(a=a.negate()),o&&(u=u.negate()),u=new ae(Ie(u.x*ie.beta),u.y,u.z),a.add(u)}precomputeWindow(t){const e=se?128/t+1:256/t+1,r=[];let n=this,i=n;for(let o=0;o<e;o++){i=n,r.push(i);for(let e=1;e<2**(t-1);e++)i=i.add(n),r.push(i);n=i.double()}return r}wNAF(t,e){!e&&this.equals(ae.BASE)&&(e=fe.BASE);const r=e&&e._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=e&&ue.get(e);n||(n=this.precomputeWindow(r),e&&1!==r&&(n=ae.normalizeZ(n),ue.set(e,n)));let i=ae.ZERO,o=ae.ZERO;const s=1+(se?128/r:256/r),a=2**(r-1),u=BigInt(2**r-1),f=2**r,c=BigInt(r);for(let e=0;e<s;e++){const r=e*a;let s=Number(t&u);if(t>>=c,s>a&&(s-=f,t+=Qt),0===s){let t=n[r];e%2&&(t=t.negate()),o=o.add(t)}else{let t=n[r+Math.abs(s)-1];s<0&&(t=t.negate()),i=i.add(t)}}return{p:i,f:o}}multiply(t,e){let r,n,i=Se(t);if(se){const{k1neg:t,k1:o,k2neg:s,k2:a}=_e(i);let{p:u,f}=this.wNAF(o,e),{p:c,f:h}=this.wNAF(a,e);t&&(u=u.negate()),s&&(c=c.negate()),c=new ae(Ie(c.x*ie.beta),c.y,c.z),r=u.add(c),n=f.add(h)}else{const{p:t,f:o}=this.wNAF(i,e);r=t,n=o}return ae.normalizeZ([r,n])[0]}toAffine(t=Ce(this.z)){const{x:e,y:r,z:n}=this,i=t,o=Ie(i*i),s=Ie(o*i),a=Ie(e*o),u=Ie(r*s);if(Ie(n*i)!==Qt)throw new Error("invZ was invalid");return new fe(a,u)}}ae.BASE=new ae(ie.Gx,ie.Gy,Qt),ae.ZERO=new ae(Zt,Qt,Zt);const ue=new WeakMap;class fe{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,ue.delete(this)}static fromCompressedHex(t){const e=32===t.length,r=ve(e?t:t.subarray(1));if(!Pe(r))throw new Error("Point is not on curve");let n=function(t){const{P:e}=ie,r=BigInt(6),n=BigInt(11),i=BigInt(22),o=BigInt(23),s=BigInt(44),a=BigInt(88),u=t*t*t%e,f=u*u*t%e,c=Ae(f,ee)*f%e,h=Ae(c,ee)*f%e,l=Ae(h,te)*u%e,p=Ae(l,n)*l%e,d=Ae(p,i)*p%e,y=Ae(d,s)*d%e,g=Ae(y,a)*y%e,w=Ae(g,s)*d%e,b=Ae(w,ee)*f%e,m=Ae(b,o)*p%e,E=Ae(m,r)*u%e;return Ae(E,te)}(oe(r));const i=(n&Qt)===Qt;e?i&&(n=Ie(-n)):1==(1&t[0])!==i&&(n=Ie(-n));const o=new fe(r,n);return o.assertValidity(),o}static fromUncompressedHex(t){const e=ve(t.subarray(1,33)),r=ve(t.subarray(33,65)),n=new fe(e,r);return n.assertValidity(),n}static fromHex(t){const e=Be(t),r=e.length,n=e[0];if(32===r||33===r&&(2===n||3===n))return this.fromCompressedHex(e);if(65===r&&4===n)return this.fromUncompressedHex(e);throw new Error(`Point.fromHex: received invalid point. Expected 32-33 compressed bytes or 65 uncompressed bytes, not ${r}`)}static fromPrivateKey(t){return fe.BASE.multiply(Ne(t))}static fromSignature(t,e,r){const n=function(t){const{n:e}=ie,r=8*t.length-256;let n=ve(t);return r>0&&(n>>=BigInt(r)),n>=e&&(n-=e),n}(t=Be(t)),{r:i,s:o}=function(t){if(t instanceof le)return t.assertValidity(),t;try{return le.fromDER(t)}catch(e){return le.fromCompact(t)}}(e);if(0!==r&&1!==r)throw new Error("Cannot recover signature: invalid recovery bit");if(n===Zt)throw new Error("Cannot recover signature: msgHash cannot be 0");const s=1&r?"03":"02",a=fe.fromHex(s+we(i)),{n:u}=ie,f=Ce(i,u),c=Ie(-n*f,u),h=Ie(o*f,u),l=fe.BASE.multiplyAndAddUnsafe(a,c,h);if(!l)throw new Error("Cannot recover signature: point at infinify");return l.assertValidity(),l}toRawBytes(t=!1){return Ee(this.toHex(t))}toHex(t=!1){const e=we(this.x);return t?`${this.y&Qt?"03":"02"}${e}`:`04${e}${we(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const t="Point is not on elliptic curve",{x:e,y:r}=this;if(!Pe(e)||!Pe(r))throw new Error(t);const n=Ie(r*r);if(Ie(n-oe(e))!==Zt)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new fe(this.x,Ie(-this.y))}double(){return ae.fromAffine(this).double().toAffine()}add(t){return ae.fromAffine(this).add(ae.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return ae.fromAffine(this).multiply(t,this).toAffine()}multiplyAndAddUnsafe(t,e,r){const n=ae.fromAffine(this).multiply(e),i=ae.fromAffine(t).multiplyUnsafe(r),o=n.add(i);return o.equals(ae.ZERO)?void 0:o.toAffine()}}function ce(t){return Number.parseInt(t[0],16)>=8?"00"+t:t}function he(t){if(t.length<2||2!==t[0])throw new Error(`Invalid signature integer tag: ${ge(t)}`);const e=t[1],r=t.subarray(2,e+2);if(!e||r.length!==e)throw new Error("Invalid signature integer: wrong length");if(0===r[0]&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:ve(r),left:t.subarray(e+2)}}fe.BASE=new fe(ie.Gx,ie.Gy),fe.ZERO=new fe(Zt,Zt);class le{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromCompact(t){const e=de(t),r="Signature.fromCompact";if("string"!=typeof t&&!e)throw new TypeError(`${r}: Expected string or Uint8Array`);const n=e?ge(t):t;if(128!==n.length)throw new Error(`${r}: Expected 64-byte hex`);return new le(me(n.slice(0,64)),me(n.slice(64,128)))}static fromDER(t){const e=de(t);if("string"!=typeof t&&!e)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r,s:n}=function(t){if(t.length<2||48!=t[0])throw new Error(`Invalid signature tag: ${ge(t)}`);if(t[1]!==t.length-2)throw new Error("Invalid signature: incorrect length");const{data:e,left:r}=he(t.subarray(2)),{data:n,left:i}=he(r);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${ge(i)}`);return{r:e,s:n}}(e?t:Ee(t));return new le(r,n)}static fromHex(t){return this.fromDER(t)}assertValidity(){const{r:t,s:e}=this;if(!Oe(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!Oe(e))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const t=ie.n>>Qt;return this.s>t}normalizeS(){return this.hasHighS()?new le(this.r,ie.n-this.s):this}toDERRawBytes(t=!1){return Ee(this.toDERHex(t))}toDERHex(t=!1){const e=ce(be(this.s));if(t)return e;const r=ce(be(this.r)),n=be(r.length/2),i=be(e.length/2);return`30${be(r.length/2+e.length/2+4)}02${n}${r}02${i}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return Ee(this.toCompactHex())}toCompactHex(){return we(this.r)+we(this.s)}}function pe(...t){if(!t.every(de))throw new Error("Uint8Array list expected");if(1===t.length)return t[0];const e=t.reduce(((t,e)=>t+e.length),0),r=new Uint8Array(e);for(let e=0,n=0;e<t.length;e++){const i=t[e];r.set(i,n),n+=i.length}return r}function de(t){return t instanceof Uint8Array}const ye=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function ge(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");let e="";for(let r=0;r<t.length;r++)e+=ye[t[r]];return e}function we(t){if(t>ne)throw new Error("Expected number < 2^256");return t.toString(16).padStart(64,"0")}function be(t){const e=t.toString(16);return 1&e.length?`0${e}`:e}function me(t){if("string"!=typeof t)throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function Ee(t){if("string"!=typeof t)throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+t.length);const e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){const n=2*r,i=t.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");e[r]=o}return e}function ve(t){return me(ge(t))}function Be(t){return t instanceof Uint8Array?Uint8Array.from(t):Ee(t)}function Se(t){if("number"==typeof t&&Number.isSafeInteger(t)&&t>0)return BigInt(t);if("bigint"==typeof t&&Oe(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function Ie(t,e=ie.P){const r=t%e;return r>=Zt?r:e+r}function Ae(t,e){const{P:r}=ie;let n=t;for(;e-- >Zt;)n*=n,n%=r;return n}function Ce(t,e=ie.P){if(t===Zt||e<=Zt)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=Ie(t,e),n=e,i=Zt,o=Qt,s=Qt,a=Zt;for(;r!==Zt;){const t=n/r,e=n%r,u=i-s*t,f=o-a*t;n=r,r=e,i=s,o=a,s=u,a=f}if(n!==Qt)throw new Error("invert: does not exist");return Ie(i,e)}const Te=(t,e)=>(t+e/te)/e,Ue=te**BigInt(128);function _e(t){const{n:e}=ie,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Qt*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=Te(o*t,e),a=Te(-n*t,e);let u=Ie(t-s*r-a*i,e),f=Ie(-s*n-a*o,e);const c=u>Ue,h=f>Ue;if(c&&(u=e-u),h&&(f=e-f),u>Ue||f>Ue)throw new Error("splitScalarEndo: Endomorphism failed, k="+t);return{k1neg:c,k1:u,k2neg:h,k2:f}}class xe{constructor(){this.v=new Uint8Array(32).fill(1),this.k=new Uint8Array(32).fill(0),this.counter=0}hmac(...t){return $e.hmacSha256(this.k,...t)}hmacSync(...t){if("function"!=typeof $e.hmacSha256Sync)throw new Error("utils.hmacSha256Sync is undefined, you need to set it");const e=$e.hmacSha256Sync(this.k,...t);if(e instanceof Promise)throw new Error("To use sync sign(), ensure utils.hmacSha256 is sync");return e}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(t=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),t),this.v=await this.hmac(this.v),0!==t.length&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),t),this.v=await this.hmac(this.v))}reseedSync(t=new Uint8Array){this.k=this.hmacSync(this.v,Uint8Array.from([0]),t),this.v=this.hmacSync(this.v),0!==t.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),t),this.v=this.hmacSync(this.v))}async generate(){return this.incr(),this.v=await this.hmac(this.v),this.v}generateSync(){return this.incr(),this.v=this.hmacSync(this.v),this.v}}function Oe(t){return Zt<t&&t<ie.n}function Pe(t){return Zt<t&&t<ie.P}function ke(t,e,r){const n=ve(t);if(!Oe(n))return;const{n:i}=ie,o=fe.BASE.multiply(n),s=Ie(o.x,i);if(s===Zt)return;const a=Ie(Ce(n,i)*Ie(e+r*s,i),i);if(a===Zt)return;const u=new le(s,a);return{sig:u,recovery:(o.x===u.r?0:2)|Number(o.y&Qt)}}function Ne(t){let e;if("bigint"==typeof t)e=t;else if("number"==typeof t&&Number.isSafeInteger(t)&&t>0)e=BigInt(t);else if("string"==typeof t){if(64!==t.length)throw new Error("Expected 32 bytes of private key");e=me(t)}else{if(!de(t))throw new TypeError("Expected valid private key");if(32!==t.length)throw new Error("Expected 32 bytes of private key");e=ve(t)}if(!Oe(e))throw new Error("Expected private key: 0 < key < n");return e}function Le(t){return ve(t.length>32?t.slice(0,32):t)}function Re(t){const e=Le(t),r=Ie(e,ie.n);return Fe(r<Zt?e:r)}function Fe(t){if("bigint"!=typeof t)throw new Error("Expected bigint");return Ee(we(t))}fe.BASE._setWindowSize(8);const Me={node:Xt,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0},$e={isValidPrivateKey(t){try{return Ne(t),!0}catch(t){return!1}},hashToPrivateKey:t=>{if((t=Be(t)).length<40||t.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");const e=Ie(ve(t),ie.n);if(e===Zt||e===Qt)throw new Error("Invalid private key");return function(t){return Ee(we(t))}(e)},randomBytes:(t=32)=>{if(Me.web)return Me.web.getRandomValues(new Uint8Array(t));if(Me.node){const{randomBytes:e}=Me.node;return Uint8Array.from(e(t))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>$e.hashToPrivateKey($e.randomBytes(40)),bytesToHex:ge,mod:Ie,sha256:async t=>{if(Me.web){const e=await Me.web.subtle.digest("SHA-256",t.buffer);return new Uint8Array(e)}if(Me.node){const{createHash:e}=Me.node;return Uint8Array.from(e("sha256").update(t).digest())}throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(t,...e)=>{if(Me.web){const r=await Me.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=pe(...e),i=await Me.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}if(Me.node){const{createHmac:r}=Me.node,n=r("sha256",t);return e.forEach((t=>n.update(t))),Uint8Array.from(n.digest())}throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,precompute(t=8,e=fe.BASE){const r=e===fe.BASE?e:new fe(e.x,e.y);return r._setWindowSize(t),r.multiply(ee),r}};var Ve=r(870),He=r(907),je=r.n(He);class De extends nt{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,function(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");rt(t.outputLen),rt(t.blockLen)}(t);const r=et(e);if(this.iHash=t.create(),!(this.iHash instanceof nt))throw new TypeError("Expected instance of class which extends utils.Hash");const n=this.blockLen=this.iHash.blockLen;this.outputLen=this.iHash.outputLen;const i=new Uint8Array(n);i.set(r.length>this.iHash.blockLen?t.create().update(r).digest():r);for(let t=0;t<i.length;t++)i[t]^=54;this.iHash.update(i),this.oHash=t.create();for(let t=0;t<i.length;t++)i[t]^=106;this.oHash.update(i),i.fill(0)}update(t){if(this.destroyed)throw new Error("instance is destroyed");return this.iHash.update(t),this}digestInto(t){if(this.destroyed)throw new Error("instance is destroyed");if(!(t instanceof Uint8Array)||t.length!==this.outputLen)throw new Error("HMAC: Invalid output buffer");if(this.finished)throw new Error("digest() was already called");this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return t.finished=n,t.destroyed=i,t.blockLen=o,t.outputLen=s,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ze=(t,e,r)=>new De(t,e).update(r).digest();function Ke(t){if(t.length<129)throw new Error("Invalid signature");const e=t.slice(0,2),r=t.slice(2,66),n=t.slice(66);return{recoveryId:B(e),r,s:n}}var Ge,We,qe,Ye;function Je(t){if(g.from(t,"hex").byteLength!=P)throw Error("Invalid signature");return{type:F.MessageSignature,data:t}}function Xe(t,e){switch(t){case K.SerializeP2PKH:switch(e){case V.Mainnet:return G.MainnetSingleSig;case V.Testnet:return G.TestnetSingleSig;default:throw new Error(`Unexpected txVersion ${JSON.stringify(e)} for hashMode ${t}`)}case K.SerializeP2SH:case K.SerializeP2WPKH:case K.SerializeP2WSH:switch(e){case V.Mainnet:return G.MainnetMultiSig;case V.Testnet:return G.TestnetMultiSig;default:throw new Error(`Unexpected txVersion ${JSON.stringify(e)} for hashMode ${t}`)}default:throw new Error(`Unexpected hashMode ${JSON.stringify(t)}`)}}function Ze(t,e){return{type:F.Address,version:t,hash160:e}}function Qe(t){return(0,Ve.H4)(t.version,t.hash160).toString()}ze.create=(t,e)=>new De(t,e),(Ye=Ge||(Ge={}))[Ye.Testnet=2147483648]="Testnet",Ye[Ye.Mainnet=1]="Mainnet",(qe=We||(We={}))[qe.Mainnet=0]="Mainnet",qe[qe.Testnet=128]="Testnet";var tr=Object.defineProperty,er=Object.defineProperties,rr=Object.getOwnPropertyDescriptors,nr=Object.getOwnPropertySymbols,ir=Object.prototype.hasOwnProperty,or=Object.prototype.propertyIsEnumerable,sr=(t,e,r)=>e in t?tr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ar=(t,e)=>{for(var r in e||(e={}))ir.call(e,r)&&sr(t,r,e[r]);if(nr)for(var r of nr(e))or.call(e,r)&&sr(t,r,e[r]);return t},ur=(t,e)=>er(t,rr(e));function fr(t,e=V.Mainnet){return cr(mr(t).data,e)}function cr(t,e=V.Mainnet){return t="string"==typeof t?t:t.toString("hex"),Qe(Ze(Xe(K.SerializeP2PKH,e),li(g.from(t,"hex"))))}function hr(t){return{type:F.PublicKey,data:g.from(t,"hex")}}function lr(t,e,r=W.Compressed){const n=Ke(e.data),i=new le(E(n.r),E(n.s)),o=fe.fromSignature(t,i,n.recoveryId),s=r===W.Compressed;return o.toHex(s)}function pr(t,e,r=W.Compressed){return lr(t,ur(ar({},e),{data:(n=e.data,n.slice(-2)+n.slice(0,-2))}),r);var n}$e.hmacSha256Sync=(t,...e)=>{const r=ze.create(Ct,t);return e.forEach((t=>r.update(t))),r.digest()};const dr=lr;function yr(t){return{type:F.PublicKey,data:t}}function gr(t){return!t.data.toString("hex").startsWith("04")}function wr(t){return t.data.toString("hex")}function br(t){const e=new ni;return e.push(t.data),e.concatBuffer()}function mr(t){const e=Br(t),r=function(t,e=!1){return fe.fromPrivateKey(t).toRawBytes(e)}(e.data.slice(0,32),e.compressed);return hr(A(r))}function Er(t){const e="string"==typeof t?t:A(t);return hr(fe.fromHex(e).toHex(!0))}function vr(t){const e=t.readUInt8(),r=4!==e?k:N;return yr(g.concat([g.from([e]),t.readBuffer(r)]))}function Br(t){const e=function(t){const e=g.isBuffer(t)?t:g.from(t,"hex");if(32!=e.length&&33!=e.length)throw new Error(`Improperly formatted private-key. Private-key byte length should be 32 or 33. Length provided: ${e.length}`);if(33==e.length&&1!==e[32])throw new Error("Improperly formatted private-key. 33 bytes indicate compressed key, but the last byte must be == 01");return e}(t);return{data:e,compressed:33==e.length}}function Sr(){return Br(A($e.randomPrivateKey()))}function Ir(t,e){const[r,n]=function(t,e,r={}){const{seed:n,m:i,d:o}=function(t,e,r){if(null==t)throw new Error(`sign: expected valid message hash, not "${t}"`);const n=Be(t),i=Ne(e),o=[Fe(i),Re(n)];if(null!=r){!0===r&&(r=$e.randomBytes(32));const t=Be(r);if(32!==t.length)throw new Error("sign: Expected 32 bytes of extra data");o.push(t)}return{seed:pe(...o),m:Le(n),d:i}}(t,e,r.extraEntropy);let s;const a=new xe;for(a.reseedSync(n);!(s=ke(a.generateSync(),i,o));)a.reseedSync();return function(t,e){let{sig:r,recovery:n}=t;const{canonical:i,der:o,recovered:s}=Object.assign({canonical:!0,der:!0},e);i&&r.hasHighS()&&(r=r.normalizeS(),n^=1);const a=o?r.toDERRawBytes():r.toCompactRawBytes();return s?[a,n]:a}(s,r)}(e,t.data.slice(0,32),{canonical:!0,recovered:!0});if(null==n)throw new Error("No signature recoveryId received");return Je(v(n,1)+le.fromHex(r).toCompactHex())}function Ar({messageHash:t,privateKey:e}){const r=Ir(e,t);return ur(ar({},r),{data:(n=r.data,n.slice(2)+n.slice(0,2))});var n}const Cr=Ke;function Tr(t){return mr(t.data)}function Ur(t){return t.data.toString("hex")}function _r(t,e){return(0,Ve.H4)(t,hi(e.data).toString("hex"))}function xr(t){const[e,r,n]=t.split(/\.|::/);return Pr(e,r,n)}function Or(t,e,r){const n=e||1,i=r||U;if(ai(t,i))throw new Error(`String length exceeds maximum bytes ${i.toString()}`);return{type:F.LengthPrefixedString,content:t,lengthPrefixBytes:n,maxLengthBytes:i}}function Pr(t,e,r){return{type:F.AssetInfo,address:kr(t),contractName:Or(e),assetName:Or(r)}}function kr(t){const e=(0,Ve.yI)(t);return{type:F.Address,version:e[0],hash160:e[1]}}function Nr(t){if(t.includes(".")){const[e,r]=t.split(".");return Lr(e,r)}return Rr(t)}function Lr(t,e){const r=kr(t),n=Or(e);return{type:F.Principal,prefix:J.Contract,address:r,contractName:n}}function Rr(t){const e=kr(t);return{type:F.Principal,prefix:J.Standard,address:e}}var Fr=(t=>(t[t.Int=0]="Int",t[t.UInt=1]="UInt",t[t.Buffer=2]="Buffer",t[t.BoolTrue=3]="BoolTrue",t[t.BoolFalse=4]="BoolFalse",t[t.PrincipalStandard=5]="PrincipalStandard",t[t.PrincipalContract=6]="PrincipalContract",t[t.ResponseOk=7]="ResponseOk",t[t.ResponseErr=8]="ResponseErr",t[t.OptionalNone=9]="OptionalNone",t[t.OptionalSome=10]="OptionalSome",t[t.List=11]="List",t[t.Tuple=12]="Tuple",t[t.StringASCII=13]="StringASCII",t[t.StringUTF8=14]="StringUTF8",t))(Fr||{});const Mr=BigInt("0xffffffffffffffffffffffffffffffff"),$r=BigInt(0),Vr=BigInt("0x7fffffffffffffffffffffffffffffff"),Hr=BigInt("-170141183460469231731687303715884105728"),jr=t=>{const e=b(t,!0);if(e>Vr)throw new RangeError(`Cannot construct clarity integer from value greater than ${Vr.toString()}`);if(e<Hr)throw new RangeError(`Cannot construct clarity integer form value less than ${Hr.toString()}`);return{type:Fr.Int,value:e}},Dr=t=>{const e=b(t,!1);if(e<$r)throw new RangeError("Cannot construct unsigned clarity integer from negative value");if(e>Mr)throw new RangeError(`Cannot construct unsigned clarity integer greater than ${Mr.toString()}`);return{type:Fr.UInt,value:e}},zr=t=>{if(t.length>1e6)throw new Error("Cannot construct clarity buffer that is greater than 1MB");return{type:Fr.Buffer,buffer:t}},Kr=t=>zr(g.from(t)),Gr=()=>({type:Fr.BoolTrue}),Wr=()=>({type:Fr.BoolFalse});function qr(t){if(t.type===Fr.PrincipalStandard)return Qe(t.address);if(t.type===Fr.PrincipalContract)return`${Qe(t.address)}.${t.contractName.content}`;throw new Error(`Unexpected principal data: ${JSON.stringify(t)}`)}function Yr(t){if(t.includes(".")){const[e,r]=t.split(".");return Zr(e,r)}return Jr(t)}function Jr(t){const e=kr(t);return{type:Fr.PrincipalStandard,address:e}}function Xr(t){return{type:Fr.PrincipalStandard,address:t}}function Zr(t,e){return Qr(kr(t),Or(e))}function Qr(t,e){if(g.byteLength(e.content)>=128)throw new Error("Contract name must be less than 128 bytes");return{type:Fr.PrincipalContract,address:t,contractName:e}}function tn(t,e){const r=Or(e);return{type:Fr.PrincipalContract,address:t.address,contractName:r}}function en(t){return{type:Fr.ResponseErr,value:t}}function rn(t){return{type:Fr.ResponseOk,value:t}}function nn(){return{type:Fr.OptionalNone}}function on(t){return{type:Fr.OptionalSome,value:t}}function sn(t){return{type:Fr.List,list:t}}function an(t){for(const e in t)if(!gi(e))throw new Error(`"${e}" is not a valid Clarity name`);return{type:Fr.Tuple,data:t}}var un=r(619);const fn=new Map;function cn(t,e){const r=fn.get(t);if(void 0!==r)return r(e);const n=function(t){const e=Object.values(t).filter((t=>"number"==typeof t)),r=new Set(e);return t=>r.has(t)}(t);return fn.set(t,n),cn(t,e)}class hn{static fromBuffer(t){return new hn({buff:t})}constructor(t){g.isBuffer(t)?this.smartBuffer=new un.$({buff:t}):this.smartBuffer=new un.$(t)}readBuffer(t){return this.smartBuffer.readBuffer(t)}readUInt32BE(t){return this.smartBuffer.readUInt32BE(t)}readUInt8(){return this.smartBuffer.readUInt8()}readUInt16BE(){return this.smartBuffer.readUInt16BE()}readBigUIntLE(t){const e=g.from(this.smartBuffer.readBuffer(t)).reverse().toString();return BigInt(`0x${e}`)}readBigUIntBE(t){const e=this.smartBuffer.readBuffer(t).toString("hex");return BigInt(`0x${e}`)}readBigUInt64BE(){return this.smartBuffer.readBigUInt64BE()}readString(t,e){return this.smartBuffer.readString(t,e)}get readOffset(){return this.smartBuffer.readOffset}set readOffset(t){this.smartBuffer.readOffset=t}get internalBuffer(){return this.smartBuffer.internalBuffer}readUInt8Enum(t,e){const r=this.smartBuffer.readUInt8();if(cn(t,r))return r;throw e(r)}}class ln extends Error{constructor(t){super(t),this.message=t,this.name=this.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class pn extends Error{constructor(t){super(t),this.message=t,this.name=this.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class dn extends Error{constructor(t){super(t),this.message=t,this.name=this.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class yn extends Error{constructor(t){super(t),this.message=t,this.name=this.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class gn extends Error{constructor(t){super(t),this.message=t,this.name=this.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}const wn=t=>({type:Fr.StringASCII,data:t}),bn=t=>({type:Fr.StringUTF8,data:t});function mn(t){let e;if("string"==typeof t){const r="0x"===t.slice(0,2).toLowerCase();e=new hn(g.from(r?t.slice(2):t,"hex"))}else e=g.isBuffer(t)?new hn(t):t;switch(e.readUInt8Enum(Fr,(t=>{throw new pn(`Cannot recognize Clarity Type: ${t}`)}))){case Fr.Int:return jr(e.readBuffer(16));case Fr.UInt:return Dr(e.readBuffer(16));case Fr.Buffer:const t=e.readUInt32BE();return zr(e.readBuffer(t));case Fr.BoolTrue:return Gr();case Fr.BoolFalse:return Wr();case Fr.PrincipalStandard:return Xr(Fn(e));case Fr.PrincipalContract:return Qr(Fn(e),Hn(e));case Fr.ResponseOk:return rn(mn(e));case Fr.ResponseErr:return en(mn(e));case Fr.OptionalNone:return nn();case Fr.OptionalSome:return on(mn(e));case Fr.List:const r=e.readUInt32BE(),n=[];for(let t=0;t<r;t++)n.push(mn(e));return sn(n);case Fr.Tuple:const i=e.readUInt32BE(),o={};for(let t=0;t<i;t++){const t=Hn(e).content;if(void 0===t)throw new pn('"content" is undefined');o[t]=mn(e)}return an(o);case Fr.StringASCII:const s=e.readUInt32BE(),a=e.readBuffer(s).toString("ascii");return wn(a);case Fr.StringUTF8:const u=e.readUInt32BE(),f=e.readBuffer(u).toString("utf8");return bn(f);default:throw new pn("Unable to deserialize Clarity Value from buffer. Could not find valid Clarity Type.")}}function En(t,e,r){return"string"==typeof t&&(t=Yr(t)),"string"==typeof r&&(r=Dn(r)),{type:F.Payload,payloadType:M.TokenTransfer,recipient:t,amount:b(e,!1),memo:null!=r?r:Dn("")}}function vn(t,e,r,n){return"string"==typeof t&&(t=kr(t)),"string"==typeof e&&(e=Or(e)),"string"==typeof r&&(r=Or(r)),{type:F.Payload,payloadType:M.ContractCall,contractAddress:t,contractName:e,functionName:r,functionArgs:n}}function Bn(t,e){return"string"==typeof t&&(t=Or(t)),"string"==typeof e&&(e=jn(e)),{type:F.Payload,payloadType:M.SmartContract,contractName:t,codeBody:e}}function Sn(t){const e=new ni;switch(e.appendByte(t.payloadType),t.payloadType){case M.TokenTransfer:e.push(ei(t.recipient)),e.push(w(t.amount,!1,8)),e.push(On(t.memo));break;case M.ContractCall:e.push(On(t.contractAddress)),e.push(On(t.contractName)),e.push(On(t.functionName));const r=g.alloc(4);r.writeUInt32BE(t.functionArgs.length,0),e.push(r),t.functionArgs.forEach((t=>{e.push(ei(t))}));break;case M.SmartContract:e.push(On(t.contractName)),e.push(On(t.codeBody));break;case M.PoisonMicroblock:break;case M.Coinbase:e.push(t.coinbaseBuffer)}return e.concatBuffer()}function In(t){switch(t.readUInt8Enum(M,(t=>{throw new Error(`Cannot recognize PayloadType: ${t}`)}))){case M.TokenTransfer:return En(mn(t),b(t.readBuffer(8),!1),Kn(t));case M.ContractCall:const e=Fn(t),r=Hn(t),n=Hn(t),i=[],o=t.readUInt32BE();for(let e=0;e<o;e++){const e=mn(t);i.push(e)}return vn(e,r,n,i);case M.SmartContract:return Bn(Hn(t),Hn(t,4,1e5));case M.PoisonMicroblock:return{type:F.Payload,payloadType:M.PoisonMicroblock};case M.Coinbase:return function(t){if(t.byteLength!=O)throw Error(`Coinbase buffer size must be ${O} bytes`);return{type:F.Payload,payloadType:M.Coinbase,coinbaseBuffer:t}}(t.readBuffer(O))}}var An=(t=>(t[t.PublicKeyCompressed=0]="PublicKeyCompressed",t[t.PublicKeyUncompressed=1]="PublicKeyUncompressed",t[t.SignatureCompressed=2]="SignatureCompressed",t[t.SignatureUncompressed=3]="SignatureUncompressed",t))(An||{});function Cn(t){return Je(t.readBuffer(P).toString("hex"))}function Tn(t,e){return{pubKeyEncoding:t,type:F.TransactionAuthField,contents:e}}function Un(t){const e=t.readUInt8Enum(An,(t=>{throw new pn(`Could not read ${t} as AuthFieldType`)}));switch(e){case 0:return Tn(W.Compressed,vr(t));case 1:return Tn(W.Uncompressed,vr(t));case 2:return Tn(W.Compressed,Cn(t));case 3:return Tn(W.Uncompressed,Cn(t));default:throw new Error(`Unknown auth field type: ${JSON.stringify(e)}`)}}function _n(t){const e=new ni;return e.appendHexString(t.data),e.concatBuffer()}function xn(t){const e=new ni;switch(t.contents.type){case F.PublicKey:t.pubKeyEncoding==W.Compressed?(e.appendByte(0),e.push(br(t.contents))):(e.appendByte(1),e.push(br(Er(t.contents.data))));break;case F.MessageSignature:t.pubKeyEncoding==W.Compressed?e.appendByte(2):e.appendByte(3),e.push(_n(t.contents))}return e.concatBuffer()}function On(t){switch(t.type){case F.Address:return Rn(t);case F.Principal:return Mn(t);case F.LengthPrefixedString:return Vn(t);case F.MemoString:return zn(t);case F.AssetInfo:return Gn(t);case F.PostCondition:return Xn(t);case F.PublicKey:return br(t);case F.LengthPrefixedList:return Yn(t);case F.Payload:return Sn(t);case F.TransactionAuthField:return xn(t);case F.MessageSignature:return _n(t)}}function Pn(t,e,r){switch(e){case F.Address:return Fn(t);case F.Principal:return $n(t);case F.LengthPrefixedString:return Hn(t);case F.MemoString:return Kn(t);case F.AssetInfo:return Wn(t);case F.PostCondition:return Zn(t);case F.PublicKey:return vr(t);case F.Payload:return In(t);case F.LengthPrefixedList:if(!r)throw new pn("No List Type specified");return Jn(t,r);case F.MessageSignature:return Cn(t);default:throw new Error("Could not recognize StacksMessageType")}}function kn(){return{type:F.Address,version:G.MainnetSingleSig,hash160:"0".repeat(40)}}function Nn(t,e,r){return Ze(Xe(t,e),r)}function Ln(t,e,r,n){if(0===n.length)throw Error("Invalid number of public keys");if(!(e!==K.SerializeP2PKH&&e!==K.SerializeP2WPKH||1===n.length&&1===r))throw Error("Invalid number of public keys or signatures");if(e===K.SerializeP2WPKH||e===K.SerializeP2WSH)for(let t=0;t<n.length;t++)if(!gr(n[t]))throw Error("Public keys must be compressed for segwit");switch(e){case K.SerializeP2PKH:return Ze(t,li(n[0].data));case K.SerializeP2WPKH:return Ze(t,pi(n[0].data));case K.SerializeP2SH:return Ze(t,di(r,n.map(br)));case K.SerializeP2WSH:return Ze(t,yi(r,n.map(br)))}}function Rn(t){const e=new ni;return e.appendHexString(v(t.version,1)),e.appendHexString(t.hash160),e.concatBuffer()}function Fn(t){const e=B(t.readBuffer(1).toString("hex")),r=t.readBuffer(20).toString("hex");return{type:F.Address,version:e,hash160:r}}function Mn(t){const e=new ni;return e.push(g.from([t.prefix])),e.push(Rn(t.address)),t.prefix===J.Contract&&e.push(Vn(t.contractName)),e.concatBuffer()}function $n(t){const e=t.readUInt8Enum(J,(t=>{throw new pn("Unexpected Principal payload type: ${n}")})),r=Fn(t);if(e===J.Standard)return{type:F.Principal,prefix:e,address:r};const n=Hn(t);return{type:F.Principal,prefix:e,address:r,contractName:n}}function Vn(t){const e=new ni,r=g.from(t.content),n=r.byteLength;return e.appendHexString(v(n,t.lengthPrefixBytes)),e.push(r),e.concatBuffer()}function Hn(t,e,r){e=e||1;const n=B(t.readBuffer(e).toString("hex"));return Or(t.readBuffer(n).toString(),e,null!=r?r:128)}function jn(t){return Or(t,4,1e5)}function Dn(t){if(t&&ai(t,L))throw new Error(`Memo exceeds maximum length of ${L.toString()} bytes`);return{type:F.MemoString,content:t}}function zn(t){const e=new ni,r=g.from(t.content),n=si(r.toString("hex"),2*L);return e.push(g.from(n,"hex")),e.concatBuffer()}function Kn(t){const e=t.readBuffer(L).toString();return{type:F.MemoString,content:e}}function Gn(t){const e=new ni;return e.push(Rn(t.address)),e.push(Vn(t.contractName)),e.push(Vn(t.assetName)),e.concatBuffer()}function Wn(t){return{type:F.AssetInfo,address:Fn(t),contractName:Hn(t),assetName:Hn(t)}}function qn(t,e){return{type:F.LengthPrefixedList,lengthPrefixBytes:e||4,values:t}}function Yn(t){const e=t.values,r=new ni;r.appendHexString(v(e.length,t.lengthPrefixBytes));for(let t=0;t<e.length;t++)r.push(On(e[t]));return r.concatBuffer()}function Jn(t,e,r){const n=B(t.readBuffer(r||4).toString("hex")),i=[];for(let r=0;r<n;r++)switch(e){case F.Address:i.push(Fn(t));break;case F.LengthPrefixedString:i.push(Hn(t));break;case F.MemoString:i.push(Kn(t));break;case F.AssetInfo:i.push(Wn(t));break;case F.PostCondition:i.push(Zn(t));break;case F.PublicKey:i.push(vr(t));break;case F.TransactionAuthField:i.push(Un(t))}return qn(i,r)}function Xn(t){const e=new ni;return e.appendByte(t.conditionType),e.push(Mn(t.principal)),t.conditionType!==D.Fungible&&t.conditionType!==D.NonFungible||e.push(Gn(t.assetInfo)),t.conditionType===D.NonFungible&&e.push(ei(t.assetName)),e.appendByte(t.conditionCode),t.conditionType!==D.STX&&t.conditionType!==D.Fungible||e.push(w(t.amount,!1,8)),e.concatBuffer()}function Zn(t){const e=t.readUInt8Enum(D,(t=>{throw new pn(`Could not read ${t} as PostConditionType`)})),r=$n(t);let n,i,o;switch(e){case D.STX:return n=t.readUInt8Enum(q,(t=>{throw new pn(`Could not read ${t} as FungibleConditionCode`)})),o=BigInt("0x"+t.readBuffer(8).toString("hex")),{type:F.PostCondition,conditionType:D.STX,principal:r,conditionCode:n,amount:o};case D.Fungible:return i=Wn(t),n=t.readUInt8Enum(q,(t=>{throw new pn(`Could not read ${t} as FungibleConditionCode`)})),o=BigInt("0x"+t.readBuffer(8).toString("hex")),{type:F.PostCondition,conditionType:D.Fungible,principal:r,conditionCode:n,amount:o,assetInfo:i};case D.NonFungible:i=Wn(t);const e=mn(t);return n=t.readUInt8Enum(Y,(t=>{throw new pn(`Could not read ${t} as FungibleConditionCode`)})),{type:F.PostCondition,conditionType:D.NonFungible,principal:r,conditionCode:n,assetInfo:i,assetName:e}}}function Qn(t,e){const r=g.from([t]);return g.concat([r,e])}function ti(t,e){const r=new ni,n=g.from(t.data,e),i=g.alloc(4);return i.writeUInt32BE(n.length,0),r.push(i),r.push(n),Qn(t.type,r.concatBuffer())}function ei(t){switch(t.type){case Fr.BoolTrue:case Fr.BoolFalse:return function(t){return g.from([t.type])}(t);case Fr.OptionalNone:case Fr.OptionalSome:return(e=t).type===Fr.OptionalNone?g.from([e.type]):Qn(e.type,ei(e.value));case Fr.Buffer:return function(t){const e=g.alloc(4);return e.writeUInt32BE(t.buffer.length,0),Qn(t.type,g.concat([e,t.buffer]))}(t);case Fr.UInt:return function(t){const e=S(t.value,x);return Qn(t.type,e)}(t);case Fr.Int:return function(t){const e=S(function(t,e){if(t<-(BigInt(1)<<e-BigInt(1))||(BigInt(1)<<e-BigInt(1))-BigInt(1)<t)throw`Unable to represent integer in width: ${e}`;return t>=BigInt(0)?BigInt(t):t+(BigInt(1)<<e)}(t.value,BigInt(_)),x);return Qn(t.type,e)}(t);case Fr.PrincipalStandard:return function(t){return Qn(t.type,Rn(t.address))}(t);case Fr.PrincipalContract:return function(t){return Qn(t.type,g.concat([Rn(t.address),Vn(t.contractName)]))}(t);case Fr.ResponseOk:case Fr.ResponseErr:return function(t){return Qn(t.type,ei(t.value))}(t);case Fr.List:return function(t){const e=new ni,r=g.alloc(4);r.writeUInt32BE(t.list.length,0),e.push(r);for(const r of t.list){const t=ei(r);e.push(t)}return Qn(t.type,e.concatBuffer())}(t);case Fr.Tuple:return function(t){const e=new ni,r=g.alloc(4);r.writeUInt32BE(Object.keys(t.data).length,0),e.push(r);const n=Object.keys(t.data).sort(((t,e)=>{const r=g.from(t),n=g.from(e);return r.compare(n)}));for(const r of n){const n=Or(r);e.push(Vn(n));const i=ei(t.data[r]);e.push(i)}return Qn(t.type,e.concatBuffer())}(t);case Fr.StringASCII:return function(t){return ti(t,"ascii")}(t);case Fr.StringUTF8:return function(t){return ti(t,"utf8")}(t);default:throw new ln("Unable to serialize. Invalid Clarity Value.")}var e}const ri=t=>g.from($e.randomBytes(t));class ni{constructor(){this._value=[]}get value(){return this._value}appendHexString(t){this.value.push(g.from(t,"hex"))}push(t){return this._value.push(t)}appendByte(t){if(!Number.isInteger(t)||t<0||t>255)throw new Error(`Value ${t} is not a valid byte`);this.value.push(g.from([t]))}concatBuffer(){return g.concat(this.value)}}const ii=t=>t.length%2==0?t:`0${t}`,oi=(t,e)=>t.padStart(e,"0"),si=(t,e)=>t.padEnd(e,"0"),ai=(t,e)=>!!t&&g.from(t).length>e;function ui(t){return je()(t)}function fi(t,e){const r=ui(t);return delete r[e],r}const ci=t=>g.from(Jt(t)).toString("hex"),hi=t=>g.from(Et(Ct(t))),li=t=>hi(t).toString("hex"),pi=t=>{const e=hi(t),r=new ni;r.appendByte(0),r.appendByte(e.length),r.push(e);const n=r.concatBuffer();return hi(n).toString("hex")},di=(t,e)=>{if(t>15||e.length>15)throw Error("P2SH multisig address can only contain up to 15 public keys");const r=new ni;r.appendByte(80+t),e.forEach((t=>{r.appendByte(t.length),r.push(t)})),r.appendByte(80+e.length),r.appendByte(174);const n=r.concatBuffer();return hi(n).toString("hex")},yi=(t,e)=>{if(t>15||e.length>15)throw Error("P2WSH multisig address can only contain up to 15 public keys");const r=new ni;r.appendByte(80+t),e.forEach((t=>{r.appendByte(t.length),r.push(t)})),r.appendByte(80+e.length),r.appendByte(174);const n=r.concatBuffer(),i=g.from(Ct(n)),o=new ni;o.appendByte(0),o.appendByte(i.length),o.push(i);const s=o.concatBuffer();return hi(s).toString("hex")};function gi(t){return/^[a-zA-Z]([a-zA-Z0-9]|[-_!?+<>=/*])*$|^[-+=/*]$|^[<>]=?$/.test(t)&&t.length<128}function wi(t){return`0x${ei(t).toString("hex")}`}function bi(t){return mn(t)}const mi=t=>{if(t.okay)return bi(t.result);throw new Error(t.cause)},Ei=t=>{try{return(0,Ve.yI)(t),!0}catch(t){return!1}},vi=t=>{if("success"===t)return!0;const e=m(t).toLowerCase();return 66===e.length&&m(BigInt(e).toString(16).padStart(64,"0"))===e};var Bi=Object.defineProperty,Si=Object.defineProperties,Ii=Object.getOwnPropertyDescriptors,Ai=Object.getOwnPropertySymbols,Ci=Object.prototype.hasOwnProperty,Ti=Object.prototype.propertyIsEnumerable,Ui=(t,e,r)=>e in t?Bi(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,_i=(t,e)=>{for(var r in e||(e={}))Ci.call(e,r)&&Ui(t,r,e[r]);if(Ai)for(var r of Ai(e))Ti.call(e,r)&&Ui(t,r,e[r]);return t},xi=(t,e)=>Si(t,Ii(e));function Oi(){return{type:F.MessageSignature,data:g.alloc(P,0).toString("hex")}}function Pi(t,e,r,n){const i=Ln(0,t,1,[hr(e)]).hash160,o=gr(hr(e))?W.Compressed:W.Uncompressed;return{hashMode:t,signer:i,nonce:b(r,!1),fee:b(n,!1),keyEncoding:o,signature:Oi()}}function ki(t,e,r,n,i){return{hashMode:t,signer:Ln(0,t,e,r.map(hr)).hash160,nonce:b(n,!1),fee:b(i,!1),fields:[],signaturesRequired:e}}function Ni(t){return"signature"in t}function Li(t){const e=ui(t);return e.nonce=0,e.fee=0,Ni(e)?e.signature=Oi():e.fields=[],xi(_i({},e),{nonce:BigInt(0),fee:BigInt(0)})}function Ri(t){const e=new ni;return e.appendByte(t.hashMode),e.appendHexString(t.signer),e.push(w(t.nonce,!1,8)),e.push(w(t.fee,!1,8)),e.appendByte(t.keyEncoding),e.push(_n(t.signature)),e.concatBuffer()}function Fi(t){const e=new ni;e.appendByte(t.hashMode),e.appendHexString(t.signer),e.push(w(t.nonce,!1,8)),e.push(w(t.fee,!1,8));const r=qn(t.fields);e.push(Yn(r));const n=g.alloc(2);return n.writeUInt16BE(t.signaturesRequired,0),e.push(n),e.concatBuffer()}function Mi(t,e){const r=e.readBuffer(20).toString("hex"),n=BigInt("0x"+e.readBuffer(8).toString("hex")),i=BigInt("0x"+e.readBuffer(8).toString("hex")),o=e.readUInt8Enum(W,(t=>{throw new pn(`Could not parse ${t} as PubKeyEncoding`)}));if(t===K.SerializeP2WPKH&&o!=W.Compressed)throw new pn("Failed to parse singlesig spending condition: incomaptible hash mode and key encoding");return{hashMode:t,signer:r,nonce:n,fee:i,keyEncoding:o,signature:Cn(e)}}function $i(t,e){const r=e.readBuffer(20).toString("hex"),n=BigInt("0x"+e.readBuffer(8).toString("hex")),i=BigInt("0x"+e.readBuffer(8).toString("hex")),o=Jn(e,F.TransactionAuthField).values;let s=!1,a=0;for(const t of o)switch(t.contents.type){case F.PublicKey:gr(t.contents)||(s=!0);break;case F.MessageSignature:if(t.pubKeyEncoding===W.Uncompressed&&(s=!0),a+=1,65536===a)throw new gn("Failed to parse multisig spending condition: too many signatures")}const u=e.readUInt16BE();if(s&&t===K.SerializeP2SH)throw new gn("Uncompressed keys are not allowed in this hash mode");return{hashMode:t,signer:r,nonce:n,fee:i,fields:o,signaturesRequired:u}}function Vi(t){return Ni(t)?Ri(t):Fi(t)}function Hi(t){const e=t.readUInt8Enum(K,(t=>{throw new pn(`Could not parse ${t} as AddressHashMode`)}));return e===K.SerializeP2PKH||e===K.SerializeP2WPKH?Mi(e,t):$i(e,t)}function ji(t,e,r,n){const i=t+g.from([e]).toString("hex")+w(r,!1,8).toString("hex")+w(n,!1,8).toString("hex");if(49!==g.from(i,"hex").byteLength)throw Error("Invalid signature hash length");return ci(g.from(i,"hex"))}function Di(t,e,r){const n=33+P,i=gr(e)?W.Compressed:W.Uncompressed,o=t+ii(i.toString(16))+r.data,s=g.from(o,"hex");if(s.byteLength>n)throw Error("Invalid signature hash length");return ci(s)}function zi(t,e,r,n,i){const o=ji(t,e,r,n),s=Ir(i,o);return{nextSig:s,nextSigHash:Di(o,Tr(i),s)}}function Ki(t,e,r,n,i,o){const s=ji(t,e,r,n),a=hr(dr(s,o,i));return{pubKey:a,nextSigHash:Di(s,a,o)}}function Gi(t){return{authType:z.Standard,spendingCondition:t}}function Wi(t,e){return{authType:z.Sponsored,spendingCondition:t,sponsorSpendingCondition:e||Pi(K.SerializeP2PKH,"0".repeat(66),0,0)}}function qi(t){if(t.spendingCondition)switch(t.authType){case z.Standard:return Gi(Li(t.spendingCondition));case z.Sponsored:return Wi(Li(t.spendingCondition),function(){const t=Pi(K.SerializeP2PKH,"",0,0);return t.signer=kn().hash160,t.keyEncoding=W.Compressed,t.signature=Oi(),t}());default:throw new yn("Unexpected authorization type for signing")}throw new Error("Authorization missing SpendingCondition")}function Yi(t,e){switch(t.authType){case z.Standard:case z.Sponsored:return function(t,e,r){return Ni(t)?function(t,e,r){const{pubKey:n,nextSigHash:i}=Ki(e,r,t.fee,t.nonce,t.keyEncoding,t.signature),o=Ln(0,t.hashMode,1,[n]).hash160;if(o!==t.signer)throw new gn(`Signer hash does not equal hash of public key(s): ${o} != ${t.signer}`);return i}(t,e,r):function(t,e,r){const n=[];let i=e,o=!1,s=0;for(const e of t.fields){let a;switch(e.contents.type){case F.PublicKey:gr(e.contents)||(o=!0),a=e.contents;break;case F.MessageSignature:e.pubKeyEncoding===W.Uncompressed&&(o=!0);const{pubKey:n,nextSigHash:u}=Ki(i,r,t.fee,t.nonce,e.pubKeyEncoding,e.contents);if(i=u,a=n,s+=1,65536===s)throw new gn("Too many signatures")}n.push(a)}if(s!==t.signaturesRequired)throw new gn("Incorrect number of signatures");if(o&&t.hashMode===K.SerializeP2SH)throw new gn("Uncompressed keys are not allowed in this hash mode");const a=Ln(0,t.hashMode,t.signaturesRequired,n).hash160;if(a!==t.signer)throw new gn(`Signer hash does not equal hash of public key(s): ${a} != ${t.signer}`);return i}(t,e,r)}(t.spendingCondition,e,z.Standard);default:throw new yn("Invalid origin auth type")}}function Ji(t,e){switch(t.authType){case z.Standard:const r=xi(_i({},t.spendingCondition),{fee:b(e,!1)});return xi(_i({},t),{spendingCondition:r});case z.Sponsored:const n=xi(_i({},t.sponsorSpendingCondition),{fee:b(e,!1)});return xi(_i({},t),{sponsorSpendingCondition:n})}}function Xi(t){switch(t.authType){case z.Standard:return t.spendingCondition.fee;case z.Sponsored:return t.sponsorSpendingCondition.fee}}function Zi(t,e){const r=xi(_i({},t.spendingCondition),{nonce:b(e,!1)});return xi(_i({},t),{spendingCondition:r})}function Qi(t,e){const r=xi(_i({},t.sponsorSpendingCondition),{nonce:b(e,!1)});return xi(_i({},t),{sponsorSpendingCondition:r})}function to(t,e){const r=xi(_i({},e),{nonce:b(e.nonce,!1),fee:b(e.fee,!1)});return xi(_i({},t),{sponsorSpendingCondition:r})}function eo(t){const e=new ni;switch(e.appendByte(t.authType),t.authType){case z.Standard:e.push(Vi(t.spendingCondition));break;case z.Sponsored:e.push(Vi(t.spendingCondition)),e.push(Vi(t.sponsorSpendingCondition))}return e.concatBuffer()}function ro(t){let e;switch(t.readUInt8Enum(z,(t=>{throw new pn(`Could not parse ${t} as AuthType`)}))){case z.Standard:return e=Hi(t),Gi(e);case z.Sponsored:return e=Hi(t),Wi(e,Hi(t))}}var no=Object.defineProperty,io=Object.defineProperties,oo=Object.getOwnPropertyDescriptors,so=Object.getOwnPropertySymbols,ao=Object.prototype.hasOwnProperty,uo=Object.prototype.propertyIsEnumerable,fo=(t,e,r)=>e in t?no(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;class co{constructor(t,e,r,n,i,o,s){var a,u;if(this.version=t,this.auth=e,this.payload="amount"in r?(a=((t,e)=>{for(var r in e||(e={}))ao.call(e,r)&&fo(t,r,e[r]);if(so)for(var r of so(e))uo.call(e,r)&&fo(t,r,e[r]);return t})({},r),u={amount:b(r.amount,!1)},io(a,oo(u))):r,this.chainId=null!=s?s:T,this.postConditionMode=null!=i?i:j.Deny,this.postConditions=null!=n?n:qn([]),o)this.anchorMode=o;else switch(r.payloadType){case M.Coinbase:case M.PoisonMicroblock:this.anchorMode=$.OnChainOnly;break;case M.ContractCall:case M.SmartContract:case M.TokenTransfer:this.anchorMode=$.Any}}signBegin(){const t=ui(this);return t.auth=qi(t.auth),t.txid()}verifyBegin(){const t=ui(this);return t.auth=qi(t.auth),t.txid()}verifyOrigin(){return Yi(this.auth,this.verifyBegin())}signNextOrigin(t,e){if(void 0===this.auth.spendingCondition)throw new Error('"auth.spendingCondition" is undefined');if(void 0===this.auth.authType)throw new Error('"auth.authType" is undefined');return this.signAndAppend(this.auth.spendingCondition,t,z.Standard,e)}signNextSponsor(t,e){if(this.auth.authType===z.Sponsored)return this.signAndAppend(this.auth.sponsorSpendingCondition,t,z.Sponsored,e);throw new Error('"auth.sponsorSpendingCondition" is undefined')}appendPubkey(t){const e=this.auth.spendingCondition;if(!e||Ni(e))throw new Error("Can't append public key to a singlesig condition");{const r=gr(t);e.fields.push(Tn(r?W.Compressed:W.Uncompressed,t))}}signAndAppend(t,e,r,n){const{nextSig:i,nextSigHash:o}=zi(e,r,t.fee,t.nonce,n);if(Ni(t))t.signature=i;else{const e=n.data.toString("hex").endsWith("01");t.fields.push(Tn(e?W.Compressed:W.Uncompressed,i))}return o}txid(){const t=this.serialize();return ci(t)}setSponsor(t){if(this.auth.authType!=z.Sponsored)throw new yn("Cannot sponsor sign a non-sponsored transaction");this.auth=to(this.auth,t)}setFee(t){this.auth=Ji(this.auth,t)}setNonce(t){this.auth=Zi(this.auth,t)}setSponsorNonce(t){if(this.auth.authType!=z.Sponsored)throw new yn("Cannot sponsor sign a non-sponsored transaction");this.auth=Qi(this.auth,t)}serialize(){if(void 0===this.version)throw new ln('"version" is undefined');if(void 0===this.chainId)throw new ln('"chainId" is undefined');if(void 0===this.auth)throw new ln('"auth" is undefined');if(void 0===this.anchorMode)throw new ln('"anchorMode" is undefined');if(void 0===this.payload)throw new ln('"payload" is undefined');const t=new ni;t.appendByte(this.version);const e=g.alloc(4);return e.writeUInt32BE(this.chainId,0),t.push(e),t.push(eo(this.auth)),t.appendByte(this.anchorMode),t.appendByte(this.postConditionMode),t.push(Yn(this.postConditions)),t.push(Sn(this.payload)),t.concatBuffer()}}function ho(t){let e;e="string"==typeof t?"0x"===t.slice(0,2).toLowerCase()?new hn(g.from(t.slice(2),"hex")):new hn(g.from(t,"hex")):g.isBuffer(t)?new hn(t):t;const r=e.readUInt8Enum(V,(t=>{throw new Error(`Could not parse ${t} as TransactionVersion`)})),n=e.readUInt32BE(),i=ro(e),o=e.readUInt8Enum($,(t=>{throw new Error(`Could not parse ${t} as AnchorMode`)})),s=e.readUInt8Enum(j,(t=>{throw new Error(`Could not parse ${t} as PostConditionMode`)})),a=Jn(e,F.PostCondition),u=In(e);return new co(r,i,u,a,s,o,n)}function lo(t,e,r){return"string"==typeof t&&(t=Nr(t)),{type:F.PostCondition,conditionType:D.STX,principal:t,conditionCode:e,amount:b(r,!1)}}function po(t,e,r,n){return"string"==typeof t&&(t=Nr(t)),"string"==typeof n&&(n=xr(n)),{type:F.PostCondition,conditionType:D.Fungible,principal:t,conditionCode:e,amount:b(r,!1),assetInfo:n}}function yo(t,e,r,n){return"string"==typeof t&&(t=Nr(t)),"string"==typeof r&&(r=xr(r)),{type:F.PostCondition,conditionType:D.NonFungible,principal:t,conditionCode:e,assetInfo:r,assetName:n}}function go(t,e="hex"){switch(t.type){case Fr.BoolTrue:return"true";case Fr.BoolFalse:return"false";case Fr.Int:return t.value.toString();case Fr.UInt:return`u${t.value.toString()}`;case Fr.Buffer:if("tryAscii"===e){const e=t.buffer.toString("ascii");if(/[ -~]/.test(e))return JSON.stringify(e)}return`0x${t.buffer.toString("hex")}`;case Fr.OptionalNone:return"none";case Fr.OptionalSome:return`(some ${go(t.value,e)})`;case Fr.ResponseErr:return`(err ${go(t.value,e)})`;case Fr.ResponseOk:return`(ok ${go(t.value,e)})`;case Fr.PrincipalStandard:case Fr.PrincipalContract:return qr(t);case Fr.List:return`(list ${t.list.map((t=>go(t,e))).join(" ")})`;case Fr.Tuple:return`(tuple ${Object.keys(t.data).map((r=>`(${r} ${go(t.data[r],e)})`)).join(" ")})`;case Fr.StringASCII:return`"${t.data}"`;case Fr.StringUTF8:return`u"${t.data}"`}}function wo(t,e=!1){switch(t.type){case Fr.BoolTrue:return!0;case Fr.BoolFalse:return!1;case Fr.Int:case Fr.UInt:return e?t.value.toString():t.value;case Fr.Buffer:return`0x${t.buffer.toString("hex")}`;case Fr.OptionalNone:return null;case Fr.OptionalSome:case Fr.ResponseErr:case Fr.ResponseOk:return bo(t.value);case Fr.PrincipalStandard:case Fr.PrincipalContract:return qr(t);case Fr.List:return t.list.map((t=>bo(t)));case Fr.Tuple:const r={};return Object.keys(t.data).forEach((e=>{r[e]=bo(t.data[e])})),r;case Fr.StringASCII:case Fr.StringUTF8:return t.data}}function bo(t){switch(t.type){case Fr.ResponseErr:return{type:mo(t),value:wo(t,!0),success:!1};case Fr.ResponseOk:return{type:mo(t),value:wo(t,!0),success:!0};default:return{type:mo(t),value:wo(t,!0)}}}function mo(t){switch(t.type){case Fr.BoolTrue:case Fr.BoolFalse:return"bool";case Fr.Int:return"int";case Fr.UInt:return"uint";case Fr.Buffer:return`(buff ${t.buffer.length})`;case Fr.OptionalNone:return"(optional none)";case Fr.OptionalSome:return`(optional ${mo(t.value)})`;case Fr.ResponseErr:return`(response UnknownType ${mo(t.value)})`;case Fr.ResponseOk:return`(response ${mo(t.value)} UnknownType)`;case Fr.PrincipalStandard:case Fr.PrincipalContract:return"principal";case Fr.List:return`(list ${t.list.length} ${t.list.length?mo(t.list[0]):"UnknownType"})`;case Fr.Tuple:return`(tuple ${Object.keys(t.data).map((e=>`(${e} ${mo(t.data[e])})`)).join(" ")})`;case Fr.StringASCII:return`(string-ascii ${g.from(t.data,"ascii").length})`;case Fr.StringUTF8:return`(string-utf8 ${g.from(t.data,"utf8").length})`}}r(616);const Eo={referrerPolicy:"origin"};async function vo(t,e){const r={};return Object.assign(r,e,Eo),await fetch(t,r)}function Bo(...t){const{fetchLib:e,middlewares:r}=function(t){let e=vo,r=[];return t.length>0&&"function"==typeof t[0]&&(e=t.shift()),t.length>0&&(r=t),{fetchLib:e,middlewares:r}}(t);return async(t,n)=>{var i;let o={url:t,init:null!=n?n:{}};for(const t of r)if("function"==typeof t.pre){const r=await Promise.resolve(t.pre(Object.assign({fetch:e},o)));o=null!=r?r:o}let s=await e(o.url,o.init);for(const t of r)if("function"==typeof t.post){const r=await Promise.resolve(t.post({fetch:e,url:o.url,init:o.init,response:null!==(i=null==s?void 0:s.clone())&&void 0!==i?i:s}));s=null!=r?r:s}return s}}const So=["mainnet","testnet"];class Io{constructor(t){var e;this.version=We.Mainnet,this.chainId=Ge.Mainnet,this.bnsLookupUrl="https://stacks-node-api.mainnet.stacks.co",this.broadcastEndpoint="/v2/transactions",this.transferFeeEstimateEndpoint="/v2/fees/transfer",this.transactionFeeEstimateEndpoint="/v2/fees/transaction",this.accountEndpoint="/v2/accounts",this.contractAbiEndpoint="/v2/contracts/interface",this.readOnlyFunctionCallEndpoint="/v2/contracts/call-read",this.isMainnet=()=>this.version===We.Mainnet,this.getBroadcastApiUrl=()=>`${this.coreApiUrl}${this.broadcastEndpoint}`,this.getTransferFeeEstimateApiUrl=()=>`${this.coreApiUrl}${this.transferFeeEstimateEndpoint}`,this.getTransactionFeeEstimateApiUrl=()=>`${this.coreApiUrl}${this.transactionFeeEstimateEndpoint}`,this.getAccountApiUrl=t=>`${this.coreApiUrl}${this.accountEndpoint}/${t}?proof=0`,this.getAbiApiUrl=(t,e)=>`${this.coreApiUrl}${this.contractAbiEndpoint}/${t}/${e}`,this.getReadOnlyFunctionCallApiUrl=(t,e,r)=>`${this.coreApiUrl}${this.readOnlyFunctionCallEndpoint}/${t}/${e}/${encodeURIComponent(r)}`,this.getInfoUrl=()=>`${this.coreApiUrl}/v2/info`,this.getBlockTimeInfoUrl=()=>`${this.coreApiUrl}/extended/v1/info/network_block_times`,this.getPoxInfoUrl=()=>`${this.coreApiUrl}/v2/pox`,this.getRewardsUrl=(t,e)=>{let r=`${this.coreApiUrl}/extended/v1/burnchain/rewards/${t}`;return e&&(r=`${r}?limit=${e.limit}&offset=${e.offset}`),r},this.getRewardsTotalUrl=t=>`${this.coreApiUrl}/extended/v1/burnchain/rewards/${t}/total`,this.getRewardHoldersUrl=(t,e)=>{let r=`${this.coreApiUrl}/extended/v1/burnchain/reward_slot_holders/${t}`;return e&&(r=`${r}?limit=${e.limit}&offset=${e.offset}`),r},this.getStackerInfoUrl=(t,e)=>`${this.coreApiUrl}${this.readOnlyFunctionCallEndpoint}\n    ${t}/${e}/get-stacker-info`,this.coreApiUrl=t.url,this.fetchFn=null!==(e=t.fetchFn)&&void 0!==e?e:Bo()}getNameInfo(t){const e=`${this.bnsLookupUrl}/v1/names/${t}`;return this.fetchFn(e).then((t=>{if(404===t.status)throw new Error("Name not found");if(200!==t.status)throw new Error(`Bad response status: ${t.status}`);return t.json()})).then((t=>t.address?Object.assign({},t,{address:t.address}):t))}}Io.fromName=t=>{switch(t){case"mainnet":return new Ao;case"testnet":return new Co;default:throw new Error(`Invalid network name provided. Must be one of the following: ${So.join(", ")}`)}},Io.fromNameOrNetwork=t=>"string"!=typeof t&&"version"in t?t:Io.fromName(t);class Ao extends Io{constructor(t){var e;super({url:null!==(e=null==t?void 0:t.url)&&void 0!==e?e:"https://stacks-node-api.mainnet.stacks.co",fetchFn:null==t?void 0:t.fetchFn}),this.version=We.Mainnet,this.chainId=Ge.Mainnet}}class Co extends Io{constructor(t){var e;super({url:null!==(e=null==t?void 0:t.url)&&void 0!==e?e:"https://stacks-node-api.testnet.stacks.co",fetchFn:null==t?void 0:t.fetchFn}),this.version=We.Testnet,this.chainId=Ge.Testnet}}var To=(t=>(t[t.ClarityAbiTypeUInt128=1]="ClarityAbiTypeUInt128",t[t.ClarityAbiTypeInt128=2]="ClarityAbiTypeInt128",t[t.ClarityAbiTypeBool=3]="ClarityAbiTypeBool",t[t.ClarityAbiTypePrincipal=4]="ClarityAbiTypePrincipal",t[t.ClarityAbiTypeNone=5]="ClarityAbiTypeNone",t[t.ClarityAbiTypeBuffer=6]="ClarityAbiTypeBuffer",t[t.ClarityAbiTypeResponse=7]="ClarityAbiTypeResponse",t[t.ClarityAbiTypeOptional=8]="ClarityAbiTypeOptional",t[t.ClarityAbiTypeTuple=9]="ClarityAbiTypeTuple",t[t.ClarityAbiTypeList=10]="ClarityAbiTypeList",t[t.ClarityAbiTypeStringAscii=11]="ClarityAbiTypeStringAscii",t[t.ClarityAbiTypeStringUtf8=12]="ClarityAbiTypeStringUtf8",t[t.ClarityAbiTypeTraitReference=13]="ClarityAbiTypeTraitReference",t))(To||{});const Uo=t=>"string"==typeof t,_o=t=>void 0!==t.buffer,xo=t=>void 0!==t["string-ascii"],Oo=t=>void 0!==t["string-utf8"],Po=t=>void 0!==t.response,ko=t=>void 0!==t.optional,No=t=>void 0!==t.tuple,Lo=t=>void 0!==t.list;function Ro(t){if(Uo(t)){if("uint128"===t)return{id:1,type:t};if("int128"===t)return{id:2,type:t};if("bool"===t)return{id:3,type:t};if("principal"===t)return{id:4,type:t};if("trait_reference"===t)return{id:13,type:t};if("none"===t)return{id:5,type:t};throw new Error(`Unexpected Clarity ABI type primitive: ${JSON.stringify(t)}`)}if(_o(t))return{id:6,type:t};if(Po(t))return{id:7,type:t};if(ko(t))return{id:8,type:t};if(No(t))return{id:9,type:t};if(Lo(t))return{id:10,type:t};if(xo(t))return{id:11,type:t};if(Oo(t))return{id:12,type:t};throw new Error(`Unexpected Clarity ABI type: ${JSON.stringify(t)}`)}function Fo(t,e){let r;switch(r=void 0!==t.id?t:Ro(t),r.id){case 1:return Dr(e);case 2:return jr(e);case 3:if("false"===e||"0"===e)return Wr();if("true"===e||"1"===e)return Gr();throw new Error(`Unexpected Clarity bool value: ${JSON.stringify(e)}`);case 4:if(e.includes(".")){const[t,r]=e.split(".");return Zr(t,r)}return Jr(e);case 13:const[t,n]=e.split(".");return Zr(t,n);case 5:return nn();case 6:return zr(g.from(e,"utf8"));case 11:return wn(e);case 12:return bn(e);case 7:case 8:case 9:case 10:throw new dn(`Unsupported encoding for Clarity type: ${r.id}`);default:throw new Error(`Unexpected Clarity type ID: ${JSON.stringify(r)}`)}}function Mo(t){if(Uo(t))return"int128"===t?"int":"uint128"===t?"uint":t;if(_o(t))return`(buff ${t.buffer.length})`;if(xo(t))return`(string-ascii ${t["string-ascii"].length})`;if(Oo(t))return`(string-utf8 ${t["string-utf8"].length})`;if(Po(t))return`(response ${Mo(t.response.ok)} ${Mo(t.response.error)})`;if(ko(t))return`(optional ${Mo(t.optional)})`;if(No(t))return`(tuple ${t.tuple.map((t=>`(${t.name} ${Mo(t.type)})`)).join(" ")})`;if(Lo(t))return`(list ${t.list.length} ${Mo(t.list.type)})`;throw new Error(`Type string unsupported for Clarity type: ${JSON.stringify(t)}`)}function $o(t){return`(define-${"read_only"===t.access?"read-only":t.access} (${t.name} ${t.args.map((t=>`(${t.name} ${Mo(t.type)})`)).join(" ")}))`}function Vo(t,e){const r=Ro(e);switch(t.type){case Fr.BoolTrue:case Fr.BoolFalse:return 3===r.id;case Fr.Int:return 2===r.id;case Fr.UInt:return 1===r.id;case Fr.Buffer:return 6===r.id&&r.type.buffer.length>=t.buffer.length;case Fr.StringASCII:return 11===r.id&&r.type["string-ascii"].length>=t.data.length;case Fr.StringUTF8:return 12===r.id&&r.type["string-utf8"].length>=t.data.length;case Fr.OptionalNone:return 5===r.id||8===r.id;case Fr.OptionalSome:return 8===r.id&&Vo(t.value,r.type.optional);case Fr.ResponseErr:return 7===r.id&&Vo(t.value,r.type.response.error);case Fr.ResponseOk:return 7===r.id&&Vo(t.value,r.type.response.ok);case Fr.PrincipalContract:return 4===r.id||13===r.id;case Fr.PrincipalStandard:return 4===r.id;case Fr.List:return 10==r.id&&r.type.list.length>=t.list.length&&t.list.every((t=>Vo(t,r.type.list.type)));case Fr.Tuple:if(9==r.id){const e=ui(t.data);for(let t=0;t<r.type.tuple.length;t++){const n=r.type.tuple[t],i=n.name,o=e[i];if(!o)return!1;if(!Vo(o,n.type))return!1;delete e[i]}return!0}return!1;default:return!1}}function Ho(t,e){const r=e.functions.filter((e=>e.name===t.functionName.content));if(1===r.length){const e=r[0].args;if(t.functionArgs.length!==e.length)throw new Error(`Clarity function expects ${e.length} argument(s) but received ${t.functionArgs.length}`);for(let r=0;r<t.functionArgs.length;r++){const n=t.functionArgs[r],i=e[r];if(!Vo(n,i.type)){const e=r+1;throw new Error(`Clarity function \`${t.functionName.content}\` expects argument ${e} to be of type ${Mo(i.type)}, not ${mo(n)}`)}}return!0}throw 0===r.length?new Error(`ABI doesn't contain a function with the name ${t.functionName.content}`):new Error(`Malformed ABI. Contains multiple functions with the name ${t.functionName.content}`)}function jo(t,e){const r=Mo(e);if(Uo(e)){if("uint128"===e)return Dr(t);if("int128"===e)return jr(t);if("bool"===e){if("true"===t.toLowerCase())return Gr();if("false"===t.toLowerCase())return Wr();throw new Error(`Invalid bool value: ${t}`)}if("principal"===e){if(t.includes(".")){const[e,r]=t.split(".");return Zr(e,r)}return Jr(t)}throw new Error(`Contract function contains unsupported Clarity ABI type: ${r}`)}if(_o(e)){if(g.from(t).byteLength>e.buffer.length)throw new Error(`Input exceeds specified buffer length limit of ${e.buffer.length}`);return Kr(t)}throw Po(e)||ko(e)||No(e)||Lo(e),new Error(`Contract function contains unsupported Clarity ABI type: ${r}`)}class Do{constructor(t){this.transaction=t,this.sigHash=t.signBegin(),this.originDone=!1,this.checkOversign=!0,this.checkOverlap=!0;const e=t.auth.spendingCondition;if(e&&!Ni(e)){if(e.fields.filter((t=>t.contents.type===F.MessageSignature)).length>=e.signaturesRequired)throw new Error("SpendingCondition has more signatures than are expected");e.fields.forEach((r=>{if(r.contents.type===F.MessageSignature){const n=r.contents,i=Ki(this.sigHash,t.auth.authType,e.fee,e.nonce,W.Compressed,n);this.sigHash=i.nextSigHash}}))}}static createSponsorSigner(t,e){if(t.auth.authType!=z.Sponsored)throw new yn("Cannot add sponsor to non-sponsored transaction");const r=ui(t);r.setSponsor(e);const n=r.verifyOrigin(),i=new this(r);return i.originDone=!0,i.sigHash=n,i.checkOversign=!0,i.checkOverlap=!0,i}signOrigin(t){if(this.checkOverlap&&this.originDone)throw new yn("Cannot sign origin after sponsor key");if(void 0===this.transaction.auth)throw new yn('"transaction.auth" is undefined');if(void 0===this.transaction.auth.spendingCondition)throw new yn('"transaction.auth.spendingCondition" is undefined');if(!Ni(this.transaction.auth.spendingCondition)){const t=this.transaction.auth.spendingCondition;if(this.checkOversign&&t.fields.filter((t=>t.contents.type===F.MessageSignature)).length>=t.signaturesRequired)throw new Error("Origin would have too many signatures")}const e=this.transaction.signNextOrigin(this.sigHash,t);this.sigHash=e}appendOrigin(t){if(this.checkOverlap&&this.originDone)throw Error("Cannot append public key to origin after sponsor key");if(void 0===this.transaction.auth)throw new Error('"transaction.auth" is undefined');if(void 0===this.transaction.auth.spendingCondition)throw new Error('"transaction.auth.spendingCondition" is undefined');this.transaction.appendPubkey(t)}signSponsor(t){if(void 0===this.transaction.auth)throw new yn('"transaction.auth" is undefined');if(this.transaction.auth.authType!==z.Sponsored)throw new yn('"transaction.auth.authType" is not AuthType.Sponsored');const e=this.transaction.signNextSponsor(this.sigHash,t);this.sigHash=e,this.originDone=!0}getTxInComplete(){return ui(this.transaction)}resume(t){this.transaction=ui(t),this.sigHash=t.signBegin()}}var zo=Object.defineProperty,Ko=Object.defineProperties,Go=Object.getOwnPropertyDescriptors,Wo=Object.getOwnPropertySymbols,qo=Object.prototype.hasOwnProperty,Yo=Object.prototype.propertyIsEnumerable,Jo=(t,e,r)=>e in t?zo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Xo=(t,e)=>{for(var r in e||(e={}))qo.call(e,r)&&Jo(t,r,e[r]);if(Wo)for(var r of Wo(e))Yo.call(e,r)&&Jo(t,r,e[r]);return t};async function Zo(t,e){const r=Io.fromNameOrNetwork(null!=e?e:new Ao),n=r.getAccountApiUrl(t),i=await r.fetchFn(n);if(!i.ok){let t="";try{t=await i.text()}catch(t){}throw new Error(`Error fetching nonce. Response ${i.status}: ${i.statusText}. Attempted to fetch ${n} and failed with the message: "${t}"`)}const o=await i.text(),s=JSON.parse(o);return BigInt(s.nonce)}async function Qo(t,e){if(t.payload.payloadType!==M.TokenTransfer)throw new Error(`Transaction fee estimation only possible with ${M[M.TokenTransfer]} transactions. Invoked with: ${M[t.payload.payloadType]}`);const r=Io.fromNameOrNetwork(null!=e?e:is(t)),n=r.getTransferFeeEstimateApiUrl(),i=await r.fetchFn(n,{method:"GET",headers:{Accept:"application/text"}});if(!i.ok){let t="";try{t=await i.text()}catch(t){}throw new Error(`Error estimating transaction fee. Response ${i.status}: ${i.statusText}. Attempted to fetch ${n} and failed with the message: "${t}"`)}const o=await i.text(),s=BigInt(t.serialize().byteLength);return BigInt(o)*s}async function ts(t,e,r){const n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Xo({transaction_payload:Sn(t).toString("hex")},e?{estimated_len:e}:{}))},i=Io.fromNameOrNetwork(null!=r?r:new Ao),o=i.getTransactionFeeEstimateApiUrl(),s=await i.fetchFn(o,n);if(!s.ok){let t="";try{t=await s.text()}catch(t){}throw new Error(`Error estimating transaction fee. Response ${s.status}: ${s.statusText}. Attempted to fetch ${o} and failed with the message: "${t}"`)}return(await s.json()).estimations}async function es(t,e,r){const n=t.serialize(),i=Io.fromNameOrNetwork(null!=e?e:is(t));return rs(n,i.getBroadcastApiUrl(),r,i.fetchFn)}async function rs(t,e,r,n=Bo()){const i={method:"POST",headers:{"Content-Type":r?"application/json":"application/octet-stream"},body:r?JSON.stringify({tx:t.toString("hex"),attachment:r.toString("hex")}):t},o=await n(e,i);if(!o.ok)try{return await o.json()}catch(t){throw Error(`Failed to broadcast transaction: ${t.message}`)}const s=await o.text(),a=s.replace(/["]+/g,"");if(!vi(a))throw new Error(s);return{txid:a}}async function ns(t,e,r){const n=Io.fromNameOrNetwork(r),i=n.getAbiApiUrl(t,e),o=await n.fetchFn(i,{method:"GET"});if(!o.ok){const r=await o.text().catch((()=>""));throw new Error(`Error fetching contract ABI for contract "${e}" at address ${t}. Response ${o.status}: ${o.statusText}. Attempted to fetch ${i} and failed with the message: "${r}"`)}return JSON.parse(await o.text())}function is(t){switch(t.version){case V.Mainnet:return new Ao;case V.Testnet:return new Co}}async function os(t){const e={fee:BigInt(0),nonce:BigInt(0),network:new Ao,postConditionMode:j.Deny,memo:"",sponsored:!1},r=Object.assign(e,t),n=En(r.recipient,r.amount,r.memo);let i=null,o=null;o="publicKey"in r?Pi(K.SerializeP2PKH,r.publicKey,r.nonce,r.fee):ki(K.SerializeP2SH,r.numSignatures,r.publicKeys,r.nonce,r.fee),i=r.sponsored?Wi(o):Gi(o);const s=Io.fromNameOrNetwork(r.network),a=[];r.postConditions&&r.postConditions.length>0&&r.postConditions.forEach((t=>{a.push(t)}));const u=qn(a),f=new co(s.version,i,n,u,r.postConditionMode,r.anchorMode,s.chainId);if(void 0===t.fee||null===t.fee){const t=vs(f),e=await ts(n,t,r.network);f.setFee(e[1].fee)}if(void 0===t.nonce||null===t.nonce){const t=r.network.version===V.Mainnet?G.MainnetSingleSig:G.TestnetSingleSig,e=(0,Ve.H4)(t,f.auth.spendingCondition.signer),n=await Zo(e,r.network);f.setNonce(n)}return f}async function ss(t){if("senderKey"in t){const e=wr(Tr(Br(t.senderKey))),r=fi(t,"senderKey"),n=await os(Xo({publicKey:e},r)),i=Br(t.senderKey);return new Do(n).signOrigin(i),n}{const e=fi(t,"signerKeys"),r=await os(e),n=new Do(r);let i=t.publicKeys;for(const e of t.signerKeys){const t=mr(e);i=i.filter((e=>e!==t.data.toString("hex"))),n.signOrigin(Br(e))}for(const t of i)n.appendOrigin(yr(g.from(t,"hex")));return r}}async function as(t,e){if(t.payload.payloadType!==M.SmartContract)throw new Error(`Contract deploy fee estimation only possible with ${M[M.SmartContract]} transactions. Invoked with: ${M[t.payload.payloadType]}`);const r=Io.fromNameOrNetwork(null!=e?e:is(t)),n=r.getTransferFeeEstimateApiUrl(),i=await r.fetchFn(n,{method:"GET",headers:{Accept:"application/text"}});if(!i.ok){const t=await i.text().catch((()=>""));throw new Error(`Error estimating contract deploy fee. Response ${i.status}: ${i.statusText}. Attempted to fetch ${n} and failed with the message: "${t}"`)}const o=await i.text(),s=b(t.serialize().byteLength,!1);return b(o,!1)*s}async function us(t){const e=Br(t.senderKey),r=wr(Tr(e)),n=(i=Xo({},t),Ko(i,Go({publicKey:r})));var i;const o=await fs(n);return t.senderKey&&new Do(o).signOrigin(e),o}async function fs(t){const e={fee:BigInt(0),nonce:BigInt(0),network:new Ao,postConditionMode:j.Deny,sponsored:!1},r=Object.assign(e,t),n=Bn(r.contractName,r.codeBody),i=K.SerializeP2PKH,o=hr(r.publicKey);let s=null;const a=Pi(i,wr(o),r.nonce,r.fee);s=r.sponsored?Wi(a):Gi(a);const u=Io.fromNameOrNetwork(r.network),f=[];r.postConditions&&r.postConditions.length>0&&r.postConditions.forEach((t=>{f.push(t)}));const c=qn(f),h=new co(u.version,s,n,c,r.postConditionMode,r.anchorMode,u.chainId);if(void 0===t.fee||null===t.fee){const t=vs(h),e=await ts(n,t,r.network);h.setFee(e[1].fee)}if(void 0===t.nonce||null===t.nonce){const t=_r(r.network.version===V.Mainnet?G.MainnetSingleSig:G.TestnetSingleSig,o),e=await Zo(t,r.network);h.setNonce(e)}return h}async function cs(t,e){if(t.payload.payloadType!==M.ContractCall)throw new Error(`Contract call fee estimation only possible with ${M[M.ContractCall]} transactions. Invoked with: ${M[t.payload.payloadType]}`);const r=Io.fromNameOrNetwork(null!=e?e:is(t)),n=r.getTransferFeeEstimateApiUrl(),i=await r.fetchFn(n,{method:"GET",headers:{Accept:"application/text"}});if(!i.ok){const t=await i.text().catch((()=>""));throw new Error(`Error estimating contract call fee. Response ${i.status}: ${i.statusText}. Attempted to fetch ${n} and failed with the message: "${t}"`)}const o=await i.text(),s=b(t.serialize().byteLength,!1);return b(o,!1)*s}async function hs(t){const e={fee:BigInt(0),nonce:BigInt(0),network:new Ao,postConditionMode:j.Deny,sponsored:!1},r=Object.assign(e,t),n=vn(r.contractAddress,r.contractName,r.functionName,r.functionArgs);if(null==r?void 0:r.validateWithAbi){let t;if("boolean"==typeof r.validateWithAbi){if(!(null==r?void 0:r.network))throw new Error("Network option must be provided in order to validate with ABI");t=await ns(r.contractAddress,r.contractName,r.network)}else t=r.validateWithAbi;Ho(n,t)}let i=null,o=null;i="publicKey"in r?Pi(K.SerializeP2PKH,r.publicKey,r.nonce,r.fee):ki(K.SerializeP2SH,r.numSignatures,r.publicKeys,r.nonce,r.fee),o=r.sponsored?Wi(i):Gi(i);const s=Io.fromNameOrNetwork(r.network),a=[];r.postConditions&&r.postConditions.length>0&&r.postConditions.forEach((t=>{a.push(t)}));const u=qn(a),f=new co(s.version,o,n,u,r.postConditionMode,r.anchorMode,s.chainId);if(void 0===t.fee||null===t.fee){const t=vs(f),e=await ts(n,t,s);f.setFee(e[1].fee)}if(void 0===t.nonce||null===t.nonce){const t=s.version===V.Mainnet?G.MainnetSingleSig:G.TestnetSingleSig,e=(0,Ve.H4)(t,f.auth.spendingCondition.signer),r=await Zo(e,s);f.setNonce(r)}return f}async function ls(t){if("senderKey"in t){const e=wr(Tr(Br(t.senderKey))),r=fi(t,"senderKey"),n=await hs(Xo({publicKey:e},r)),i=Br(t.senderKey);return new Do(n).signOrigin(i),n}{const e=fi(t,"signerKeys"),r=await hs(e),n=new Do(r);let i=t.publicKeys;for(const e of t.signerKeys){const t=mr(e);i=i.filter((e=>e!==t.data.toString("hex"))),n.signOrigin(Br(e))}for(const t of i)n.appendOrigin(yr(g.from(t,"hex")));return r}}function ps(t,e,r){return lo(Rr(t),e,r)}function ds(t,e,r,n){return lo(Lr(t,e),r,n)}function ys(t,e,r,n){return po(Rr(t),e,r,n)}function gs(t,e,r,n,i){return po(Lr(t,e),r,n,i)}function ws(t,e,r,n){return yo(Rr(t),e,r,n)}function bs(t,e,r,n,i){return yo(Lr(t,e),r,n,i)}async function ms(t){const e={network:new Ao},r=Object.assign(e,t),{contractName:n,contractAddress:i,functionName:o,functionArgs:s,senderAddress:a}=r,u=Io.fromNameOrNetwork(r.network),f=u.getReadOnlyFunctionCallApiUrl(i,n,o),c=s.map((t=>wi(t))),h=JSON.stringify({sender:a,arguments:c}),l=await u.fetchFn(f,{method:"POST",body:h,headers:{"Content-Type":"application/json"}});if(!l.ok){const t=await l.text().catch((()=>""));throw new Error(`Error calling read-only function. Response ${l.status}: ${l.statusText}. Attempted to fetch ${f} and failed with the message: "${t}"`)}return l.json().then((t=>mi(t)))}async function Es(t){const e={fee:0,sponsorNonce:0,sponsorAddressHashmode:K.SerializeP2PKH,network:t.transaction.version===V.Mainnet?new Ao:new Co},r=Object.assign(e,t),n=Io.fromNameOrNetwork(r.network),i=mr(r.sponsorPrivateKey);if(void 0===t.fee||null===t.fee){let t=0;switch(r.transaction.payload.payloadType){case M.TokenTransfer:case M.SmartContract:case M.ContractCall:const e=vs(r.transaction);try{t=(await ts(r.transaction.payload,e,n))[1].fee}catch(t){throw t}break;default:throw new Error(`Sponsored transactions not supported for transaction type ${M[r.transaction.payload.payloadType]}`)}r.transaction.setFee(t),r.fee=t}if(void 0===t.sponsorNonce||null===t.sponsorNonce){const t=_r(n.version===V.Mainnet?G.MainnetSingleSig:G.TestnetSingleSig,i),e=await Zo(t,n);r.sponsorNonce=e}const o=Pi(r.sponsorAddressHashmode,wr(i),r.sponsorNonce,r.fee);r.transaction.setSponsor(o);const s=Br(r.sponsorPrivateKey),a=Do.createSponsorSigner(r.transaction,o);return a.signSponsor(s),a.transaction}function vs(t){const e=t.auth.spendingCondition.hashMode;if([K.SerializeP2SH,K.SerializeP2WSH].includes(e)){const e=t.auth.spendingCondition,r=e.fields.filter((t=>t.contents.type===F.MessageSignature)).length,n=(e.signaturesRequired-r)*(P+1);return t.serialize().byteLength+n}return t.serialize().byteLength}const Bs=g.from("SIP018","ascii");function Ss(t){return g.from(Ct(ei(t)))}function Is({message:t,domain:e}){const r=Ss(t);if((n=e).type!==Fr.Tuple||!["name","version","chain-id"].every((t=>t in n.data))||!["name","version"].every((t=>n.data[t].type===Fr.StringASCII))||n.data["chain-id"].type!==Fr.UInt)throw new Error("domain parameter must be a valid domain of type TupleCV with keys 'name', 'version', 'chain-id' with respective types StringASCII, StringASCII, UInt");var n;const i=Ss(e);return g.concat([Bs,i,r])}function As(t){const e=g.from(t);return{domainHash:e.slice(Bs.length,Bs.length+32),messageHash:e.slice(Bs.length+32)}}function Cs({message:t,domain:e,privateKey:r}){const n=g.from(Ct(Is({message:t,domain:e}))).toString("hex"),{data:i}=Ar({messageHash:n,privateKey:r});return{data:i,type:F.StructuredDataSignature}}})(),n})()));
//# sourceMappingURL=index.js.map